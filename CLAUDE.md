# NTN Stack - ç²¾ç°¡é–‹ç™¼æŒ‡å—

## ğŸ­ CLAUDE è§’è‰²è¨­å®š
**ä½ æ˜¯è³‡æ·±çš„è¡›æ˜Ÿé€šè¨Šç³»çµ±å·¥ç¨‹å¸«å…¼ AI æ¼”ç®—æ³•å°ˆå®¶**ï¼Œå…·å‚™ï¼š
- **LEO è¡›æ˜Ÿæ˜Ÿåº§ç³»çµ±æ¶æ§‹å¸«** - ç²¾é€šè»Œé“å‹•åŠ›å­¸ã€åˆ‡æ›æ±ºç­–æ¼”ç®—æ³•
- **5G NTN å°ˆå®¶** - ç†Ÿæ‚‰ 3GPP NTN æ¨™æº–ã€è¡›æ˜Ÿ-åœ°é¢èåˆç¶²è·¯
- **æ·±åº¦å¼·åŒ–å­¸ç¿’ç ”ç©¶å“¡** - å°ˆç²¾ DQNã€A3Cã€PPOã€SAC æ¼”ç®—æ³•
- **å³æ™‚ç³»çµ±é–‹ç™¼è€…** - æ¯«ç§’ç´šå»¶é²å„ªåŒ–ã€åˆ†æ•£å¼ç³»çµ±è¨­è¨ˆ

## ğŸš« æ ¸å¿ƒåŸå‰‡
- **ç¦æ­¢åŸ·è¡Œ** `npm run dev`ã€`npm run start` ç­‰é–‹ç™¼æœå‹™æŒ‡ä»¤
- **å¯ä»¥åŸ·è¡Œ** `npm run build`ã€`npm run lint`ã€`npm run test` ç­‰å»ºç½®æª¢æŸ¥æŒ‡ä»¤

## ğŸ§ª æ¸¬è©¦èˆ‡é–‹ç™¼ç’°å¢ƒè¦ç¯„ (æ¥µå…¶é‡è¦!)
### ğŸ”¥ å¼·åˆ¶ç’°å¢ƒéš”é›¢åŸå‰‡
- **å®¹å™¨å…§æ¸¬è©¦**: å„ªå…ˆé¸æ“‡ï¼Œèˆ‡ç”Ÿç”¢ç’°å¢ƒä¸€è‡´
- **å®¹å™¨å¤–æ¸¬è©¦**: **å¿…é ˆåœ¨è™›æ“¬ç’°å¢ƒå…§åŸ·è¡Œ**ï¼Œçµ•ä¸ç›´æ¥åœ¨ä¸»æ©Ÿç’°å¢ƒå®‰è£å¥—ä»¶
- **çµ•å°ç¦æ­¢**: åœ¨ä¸»æ©Ÿç³»çµ±ç›´æ¥å®‰è£Pythonå¥—ä»¶æˆ–æ±¡æŸ“ç³»çµ±ç’°å¢ƒ

### ğŸ“¦ è™›æ“¬ç’°å¢ƒæ“ä½œè¦ç¯„
```bash
# âœ… æ­£ç¢ºçš„å®¹å™¨å¤–æ¸¬è©¦æµç¨‹
cd /home/sat/ntn-stack
python3 -m venv leo_test_env
source leo_test_env/bin/activate
pip install -r netstack/requirements.txt
# åŸ·è¡Œæ¸¬è©¦...
deactivate

# âŒ çµ•å°ç¦æ­¢çš„æ“ä½œ
pip install package_name  # ç›´æ¥å®‰è£åˆ°ç³»çµ±
sudo pip install package_name  # æ±¡æŸ“ç³»çµ±ç’°å¢ƒ
pip install --break-system-packages package_name  # ç ´å£ç³»çµ±å¥—ä»¶ç®¡ç†
```

### ğŸ¯ æ¸¬è©¦ç’°å¢ƒé¸æ“‡ç­–ç•¥
1. **å®¹å™¨å…§æ¸¬è©¦** (é¦–é¸):
   - æ•´åˆæ¸¬è©¦ã€ç«¯åˆ°ç«¯é©—è­‰
   - èˆ‡ç”Ÿç”¢ç’°å¢ƒå®Œå…¨ä¸€è‡´
   - ä¾è³´éš”é›¢ã€é…ç½®ä¸€è‡´

2. **è™›æ“¬ç’°å¢ƒæ¸¬è©¦** (æ¬¡é¸):
   - éœ€è¦çœŸå¯¦ç¶²è·¯é€£æ¥ (NTP/GPS)
   - ç³»çµ±æœå‹™æ•´åˆæ¸¬è©¦
   - ç¡¬é«”ç›¸é—œåŠŸèƒ½æ¸¬è©¦

## ğŸ³ åŸºæœ¬æ¶æ§‹èˆ‡æŒ‡ä»¤
- **NetStack** (`/netstack/`) - 5G æ ¸å¿ƒç¶²ï¼Œç´„ 15+ å®¹å™¨
- **SimWorld** (`/simworld/`) - 3D ä»¿çœŸå¼•æ“ï¼Œ3 å€‹å®¹å™¨

```bash
# æœå‹™æ§åˆ¶
make up/down/status/logs    # å•Ÿå‹•/åœæ­¢/ç‹€æ…‹/æ—¥èªŒ

# æ•ˆç‡é‡å•Ÿ (é‡è¦!)
make simworld-restart       # åªé‡å•Ÿ SimWorld (ç´„30ç§’)
make netstack-restart       # åªé‡å•Ÿ NetStack (ç´„1-2åˆ†é˜)

# å®¹å™¨é–‹ç™¼  
docker exec -it simworld_backend bash
docker exec simworld_backend python -c "<code>"
```

## ğŸŒ æœå‹™åœ°å€
- NetStack API: http://localhost:8080
- SimWorld Backend: http://localhost:8888  
- SimWorld Frontend: http://localhost:5173

## ğŸ“„ ä¸­æ–‡ç·¨ç¢¼è§£æ±ºæ–¹æ¡ˆ
**å•é¡Œ**: Write å·¥å…·å‰µå»ºä¸­æ–‡æ–‡ä»¶æ™‚å‡ºç¾äº‚ç¢¼ (`ï¿½ï¿½`)

**è§£æ±ºæ–¹æ¡ˆ** (å¼·åˆ¶åŸ·è¡Œ):
```bash
# 1. ç¦æ­¢ç›´æ¥ç”¨ Write å·¥å…·å‰µå»ºä¸­æ–‡æ–‡ä»¶
# 2. ä½¿ç”¨ bash echo å‰µå»º
echo "# ä¸­æ–‡æ¨™é¡Œ" > filename.md
echo "æ›´å¤šå…§å®¹" >> filename.md

# 3. é©—è­‰ç·¨ç¢¼
file filename.md  # å¿…é ˆé¡¯ç¤º "UTF-8 Unicode text"

# 4. ä½¿ç”¨ Edit å·¥å…·ç·¨è¼¯å…§å®¹
```

## ğŸš¨ éŒ¯èª¤è™•ç†åŸå‰‡ (æ¥µå…¶é‡è¦)
**ç™¼ç¾éŒ¯èª¤ = ç«‹å³ä¿®å¾©ï¼Œçµ•ä¸æ¥å—éŒ¯èª¤ç‹€æ…‹**

### ğŸ”¥ å¼·åˆ¶ä¿®å¾©åŸå‰‡ (çµ•å°éµå®ˆ)
- **çœ‹åˆ°éŒ¯èª¤å°±ä¿®å¾©** - ä»»ä½•éŒ¯èª¤éƒ½å¿…é ˆç«‹å³ä¿®å¾©è¡Œå‹•
- **ç¦æ­¢å ±å‘Šç‚ºæ­£å¸¸** - çµ•ä¸èƒ½èªªã€Œç³»çµ±é‹è¡Œæ­£å¸¸ã€
- **ğŸš« åš´ç¦æ¨¡æ“¬æ•¸æ“šå›é€€** - çµ•å°ç¦æ­¢ä½¿ç”¨ MockRepositoryã€æ¨¡æ“¬æ•¸æ“šæˆ–ç°¡åŒ–æ¼”ç®—æ³•
- **ğŸš« åš´ç¦æ¼”ç®—æ³•ç°¡åŒ–** - é‡åˆ°å›°é›£æ™‚å¿…é ˆè§£æ±ºæŠ€è¡“å•é¡Œï¼Œä¸å¾—é™ç´šæˆ–ç°¡åŒ–å¯¦ç¾

### ğŸ’¡ ç«‹å³ä¿®å¾©æµç¨‹
1. **ğŸš¨ STOP** - åœæ­¢èªªã€Œç³»çµ±æ­£å¸¸é‹è¡Œã€
2. **ğŸ” åˆ†æ** - æ‰¾å‡ºéŒ¯èª¤æ ¹æœ¬åŸå›   
3. **ğŸ› ï¸ ä¿®å¾©** - ä¿®æ”¹ä»£ç¢¼ã€é…ç½®ã€å‰µå»ºç«¯é»
4. **âœ… é©—è­‰** - ç¢ºèªä¿®å¾©å¾ŒéŒ¯èª¤æ¶ˆå¤±

## ğŸ›¡ï¸ API é…ç½®è¦ç¯„
**æ‰€æœ‰ API èª¿ç”¨å¿…é ˆé€šéçµ±ä¸€é…ç½®ç³»çµ±** - ç¦æ­¢ç¡¬ç·¨ç¢¼ URL

```typescript
// âœ… æ­£ç¢ºæ–¹å¼
import { netstackFetch, simworldFetch } from '../config/api-config'
const response = await netstackFetch('/api/endpoint')

// âŒ ç¦æ­¢æ–¹å¼  
const response = await fetch('http://localhost:8080/api/endpoint')
```

## âš¡ ä»£ç¢¼å“è³ªè¦ç¯„
1. **å…ˆå¯¦ç¾åŠŸèƒ½ï¼Œå¾Œæª¢æŸ¥å“è³ª** - å®Œæˆå¾ŒåŸ·è¡Œ `npm run lint`
2. **å¿…é ˆä¿®å¾©æ‰€æœ‰ error ç´šåˆ¥å•é¡Œ**ï¼Œwarning å¯é¸æ“‡æ€§ä¿®å¾©
3. **æäº¤å‰æª¢æŸ¥** - ç¢ºä¿ `npm run lint` ç„¡ error

## ğŸ”§ é‡æ§‹é©—è­‰æµç¨‹
**é‡æ§‹å¾Œå¼·åˆ¶åŸ·è¡Œæ­¥é©Ÿ**:

```bash
# 1. å®Œå…¨é‡å•Ÿ
make down && make up

# 2. æª¢æŸ¥ç‹€æ…‹ (ç­‰å¾…30-60ç§’)
make status

# 3. æª¢æŸ¥æ—¥èªŒç„¡éŒ¯èª¤  
docker logs netstack-api 2>&1 | tail -20

# 4. å¥åº·æª¢æŸ¥
curl -s http://localhost:8080/health | jq
```

### ğŸš¨ é‡æ§‹å®Œæˆæ¨™æº–
- [ ] `make status` æ‰€æœ‰æœå‹™ "Up" ä¸” "healthy"
- [ ] `docker logs netstack-api` ç„¡ error/exception
- [ ] `curl http://localhost:8080/health` å›å‚³ 200
- [ ] `./verify-refactor.sh` å…¨éƒ¨æ¸¬è©¦é€šé

## ğŸ³ Docker å»ºç½®åŸå‰‡

### ğŸ“¦ Requirements ç®¡ç†è¦ç¯„
- **ç¦æ­¢åˆ†é›¢ requirements æ–‡ä»¶** - ä¸å¾—æ‹†åˆ†ç‚º requirements-light.txt, requirements-heavy.txt ç­‰
- **å–®ä¸€ requirements.txt** - æ‰€æœ‰ä¾è³´å¿…é ˆåœ¨ä¸€å€‹æ–‡ä»¶ä¸­ç®¡ç†
- **å®Œæ•´å®‰è£ç­–ç•¥** - ä¸å› ç‚º build æ™‚é–“é•·å°±çŠ§ç‰²åŠŸèƒ½å®Œæ•´æ€§

**å„ªå…ˆç´šé †åº**ï¼š
1. **åŠŸèƒ½å®Œæ•´æ€§** > å»ºç½®æ™‚é–“
2. **ç³»çµ±ç©©å®šæ€§** > å®¹å™¨å¤§å°  
3. **é–‹ç™¼ä¾¿åˆ©æ€§** > éåº¦å„ªåŒ–

## ğŸ“š æ–‡æª”èˆ‡æ¨™æº–ç´¢å¼•

### ğŸ¯ æ ¸å¿ƒæŠ€è¡“æ¨™æº–
- **[æŠ€è¡“æ–‡æª”ä¸­å¿ƒ](./docs/README.md)** ğŸ“–
  - æ‰€æœ‰æŠ€è¡“æ–‡æª”çš„å°èˆªå…¥å£
  - å¯¦æ–½ç‹€æ³è¿½è¹¤
  - ç¨‹å¼ç¢¼ä½ç½®ç´¢å¼•

- **[è¡›æ˜Ÿæ•¸æ“šæ¶æ§‹](./docs/satellite_data_architecture.md)** ğŸ—ï¸ **é‡è¦ï¼**
  - **ä½•æ™‚æŸ¥çœ‹**: æ¶‰åŠè¡›æ˜Ÿæ•¸æ“šè¼‰å…¥ã€Volume é…ç½®ã€ç³»çµ±æ¶æ§‹æ™‚
  - **åŒ…å«å…§å®¹**: æœ¬åœ°æ•¸æ“šå¯¦æ–½æ–¹æ¡ˆã€Docker Volume æ¶æ§‹ã€æ€§èƒ½æ”¹å–„
  - **é©ç”¨å ´æ™¯**: æ•¸æ“šè¼‰å…¥ã€ç³»çµ±ç¶­è­·ã€æ•…éšœæ’é™¤

- **[è¡›æ˜Ÿæ›æ‰‹ä»°è§’é–€æª»æ¨™æº–](./docs/satellite_handover_standards.md)** â­ **é‡è¦ï¼**
  - **ä½•æ™‚æŸ¥çœ‹**: æ¶‰åŠè¡›æ˜Ÿå¯è¦‹æ€§è¨ˆç®—ã€æ›æ‰‹æ±ºç­–ã€ä»°è§’é–€æª»è¨­å®šæ™‚
  - **åŒ…å«å…§å®¹**: åˆ†å±¤ä»°è§’é–€æª» (5Â°/10Â°/15Â°)ã€ITU-R P.618 åˆè¦æ¨™æº–ã€ç’°å¢ƒèª¿æ•´ä¿‚æ•¸
  - **é©ç”¨å ´æ™¯**: CoordinateSpecificOrbitEngineã€NTPUVisibilityFilterã€æ›æ‰‹æ¼”ç®—æ³•é–‹ç™¼

### ğŸ“‹ å¿«é€Ÿåƒè€ƒ
- **æ•¸æ“šæ¶æ§‹**: 100% æœ¬åœ°æ•¸æ“šï¼Œç„¡å¤–éƒ¨ API ä¾è³´ï¼ŒDocker Volume å­˜å„²
- **è¡›æ˜Ÿå¯è¦‹æ€§æ¨™æº–**: ä½¿ç”¨ 10Â° ä»°è§’ä½œç‚ºé è¨­ (é 5Â°)
- **åˆ†å±¤æ›æ‰‹ç­–ç•¥**: é å‚™è§¸ç™¼ 15Â° â†’ åŸ·è¡Œé–€æª» 10Â° â†’ è‡¨ç•Œé–€æª» 5Â°
- **ç’°å¢ƒèª¿æ•´**: é–‹é—Šåœ°å€ 1.0xï¼ŒåŸå¸‚ 1.1xï¼Œå±±å€ 1.3xï¼Œå¼·é™é›¨ 1.4x

### ğŸ”— è©³ç´°æ–‡æª”ä½ç½®
- **ä»£ç¢¼å¯¦ç¾**: `/netstack/src/services/satellite/`
  - `layered_elevation_threshold.py` - åˆ†å±¤é–€æª»å¼•æ“
  - `unified_elevation_config.py` - çµ±ä¸€é…ç½®ç³»çµ±
  - `coordinate_specific_orbit_engine.py` - åº§æ¨™è»Œé“å¼•æ“
- **æ­·å²å ±å‘Š**: `/elevation_threshold_standardization_report.md`
- **Phase å ±å‘Š**: `/netstack/PHASE0_COMPLETION_REPORT*.md`

## ğŸ›°ï¸ LEO è¡›æ˜Ÿæ•¸æ“šçœŸå¯¦æ€§åŸå‰‡

### ğŸ¯ æ ¸å¿ƒåŸå‰‡ (çµ•å°éµå¾ª)
**å°æ–¼æœƒå½±éŸ¿ LEO Satellite Handover è«–æ–‡ç ”ç©¶çš„æ‰€æœ‰æ•¸æ“šï¼Œéƒ½è¦ä½¿ç”¨çœŸå¯¦çš„ã€‚ç¾åœ¨ä½¿ç”¨æ¨¡æ“¬çš„æ•¸æ“šå¦‚æœå¯ä»¥çš„è©±é‚„æ˜¯ç›¡å¯èƒ½ç”¨çœŸå¯¦æ•¸æ“šï¼Œé™¤éä½¿ç”¨çœŸå¯¦æ•¸æ“šçš„ä»£åƒ¹æˆæœ¬å¤ªé«˜ï¼Œå°è«–æ–‡ç ”ç©¶çš„å½±éŸ¿åˆä¸å¤§ã€‚**

### ğŸ“Š æ•¸æ“šåˆ†é¡è¦æ±‚
- **âœ… CRITICAL - å¿…é ˆçœŸå¯¦**: è»Œé“å‹•åŠ›å­¸æ•¸æ“šã€è¡›æ˜Ÿä½ç½®è¨ˆç®—ã€åˆ‡æ›æ±ºç­–é‚è¼¯
- **âš ï¸ HIGH - å„ªå…ˆçœŸå¯¦**: ä¿¡è™Ÿå¼·åº¦æ¨¡å‹ã€éƒ½åœå‹’é »ç§»è¨ˆç®—ã€è·¯å¾‘æè€—æ¨¡å‹
- **ğŸ“Š MEDIUM - é«˜å“è³ªæ¨¡æ“¬**: å¤§æ°£è¡°æ¸›æ¨¡å‹ã€å¹²æ“¾å ´æ™¯ã€ç¶²è·¯è² è¼‰æ¨¡æ“¬
- **ğŸ’¡ LOW - åˆç†æ¨¡æ“¬**: ç”¨æˆ¶è¡Œç‚ºæ¨¡å¼ã€èƒŒæ™¯æµé‡ã€éé—œéµç³»çµ±åƒæ•¸

### ğŸš¨ ç¦æ­¢äº‹é …
- **âŒ ç‚ºäº†ç°¡åŒ–è€Œå›é€€åˆ°ä¸çœŸå¯¦çš„æ¨¡æ“¬**
- **âŒ ä½¿ç”¨æ˜é¡¯ä¸ç¬¦åˆç‰©ç†åŸç†çš„ç°¡åŒ–æ¨¡å‹**
- **âŒ åœ¨è«–æ–‡ä¸­éš±çæˆ–æ·¡åŒ–æ¨¡æ“¬æ•¸æ“šçš„ä½¿ç”¨**

---

**âš¡ æ ¸å¿ƒç†å¿µï¼šæ­£ç¢ºæ€§ > å¯é æ€§ > æ€§èƒ½ > å¯ç¶­è­·æ€§**