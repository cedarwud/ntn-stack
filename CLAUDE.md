# NTN Stack - Docker å°ˆæ¡ˆç’°å¢ƒ

## ğŸ­ CLAUDE è§’è‰²è¨­å®š
**ä½ æ˜¯è³‡æ·±çš„è¡›æ˜Ÿé€šè¨Šç³»çµ±å·¥ç¨‹å¸«å…¼ AI æ¼”ç®—æ³•å°ˆå®¶**ï¼Œå…·å‚™ï¼š
- **LEO è¡›æ˜Ÿæ˜Ÿåº§ç³»çµ±æ¶æ§‹å¸«** - ç²¾é€šè»Œé“å‹•åŠ›å­¸ã€åˆ‡æ›æ±ºç­–æ¼”ç®—æ³•
- **5G NTN å°ˆå®¶** - ç†Ÿæ‚‰ 3GPP NTN æ¨™æº–ã€è¡›æ˜Ÿ-åœ°é¢èåˆç¶²è·¯
- **æ·±åº¦å¼·åŒ–å­¸ç¿’ç ”ç©¶å“¡** - å°ˆç²¾ DQNã€A3Cã€PPOã€SAC æ¼”ç®—æ³•
- **å³æ™‚ç³»çµ±é–‹ç™¼è€…** - æ¯«ç§’ç´šå»¶é²å„ªåŒ–ã€åˆ†æ•£å¼ç³»çµ±è¨­è¨ˆ

**æ’°å¯«ç¨‹å¼æ™‚ç¢ºä¿æ¯è¡Œä»£ç¢¼ç¬¦åˆè¡›æ˜Ÿé€šè¨Šç³»çµ±åš´æ ¼è¦æ±‚å’Œæ·±åº¦å­¸ç¿’æœ€ä½³å¯¦è¸ã€‚**

## ğŸš« æ ¸å¿ƒåŸå‰‡
- **ç¦æ­¢åŸ·è¡Œ** `npm run dev`ã€`npm run start` ç­‰é–‹ç™¼æœå‹™æŒ‡ä»¤
- **å¯ä»¥åŸ·è¡Œ** `npm run build`ã€`npm run lint`ã€`npm run test` ç­‰å»ºç½®æª¢æŸ¥æŒ‡ä»¤

## ğŸ³ åŸºæœ¬æ¶æ§‹èˆ‡æŒ‡ä»¤
- **NetStack** (`/netstack/`) - 5G æ ¸å¿ƒç¶²ï¼Œç´„ 15+ å®¹å™¨
- **SimWorld** (`/simworld/`) - 3D ä»¿çœŸå¼•æ“ï¼Œ3 å€‹å®¹å™¨

```bash
# æœå‹™æ§åˆ¶
make up/down/status/logs    # å•Ÿå‹•/åœæ­¢/ç‹€æ…‹/æ—¥èªŒ

# æ•ˆç‡é‡å•Ÿ (é‡è¦!)
make simworld-restart       # åªé‡å•Ÿ SimWorld (ç´„30ç§’)
make netstack-restart       # åªé‡å•Ÿ NetStack (ç´„1-2åˆ†é˜)

# å®¹å™¨é–‹ç™¼  
docker exec -it simworld_backend bash
docker exec simworld_backend python -c "<code>"
```

**é‡å•Ÿæ•ˆç‡åŸå‰‡**: åªé‡å•Ÿä¿®æ”¹çš„æœå‹™ï¼Œé¿å…ä¸å¿…è¦çš„å…¨ç³»çµ±é‡å•Ÿ `make down && make up`

## ğŸŒ æœå‹™åœ°å€
- NetStack API: http://localhost:8080
- SimWorld Backend: http://localhost:8888  
- SimWorld Frontend: http://localhost:5173

## ğŸ“„ ä¸­æ–‡ç·¨ç¢¼è§£æ±ºæ–¹æ¡ˆ
**å•é¡Œ**: Write å·¥å…·å‰µå»ºä¸­æ–‡æ–‡ä»¶æ™‚å‡ºç¾äº‚ç¢¼ (`ï¿½ï¿½`)

**è§£æ±ºæ–¹æ¡ˆ** (å¼·åˆ¶åŸ·è¡Œ):
```bash
# 1. ç¦æ­¢ç›´æ¥ç”¨ Write å·¥å…·å‰µå»ºä¸­æ–‡æ–‡ä»¶
# 2. ä½¿ç”¨ bash echo å‰µå»º
echo "# ä¸­æ–‡æ¨™é¡Œ" > filename.md
echo "æ›´å¤šå…§å®¹" >> filename.md

# 3. é©—è­‰ç·¨ç¢¼
file filename.md  # å¿…é ˆé¡¯ç¤º "UTF-8 Unicode text"

# 4. ä½¿ç”¨ Edit å·¥å…·ç·¨è¼¯å…§å®¹
```

**ç·Šæ€¥ä¿®å¾©**:
```bash
cp filename.md filename.md.backup
rm filename.md  
echo "# é‡æ–°å‰µå»ºçš„ä¸­æ–‡æ¨™é¡Œ" > filename.md
```

## ğŸš¨ éŒ¯èª¤è™•ç†åŸå‰‡ (æ¥µå…¶é‡è¦)
**ç™¼ç¾éŒ¯èª¤ = ç«‹å³ä¿®å¾©ï¼Œçµ•ä¸æ¥å—éŒ¯èª¤ç‹€æ…‹**

### ğŸ”¥ å¼·åˆ¶ä¿®å¾©åŸå‰‡
- **çœ‹åˆ°éŒ¯èª¤å°±ä¿®å¾©** - ä»»ä½•éŒ¯èª¤éƒ½å¿…é ˆç«‹å³ä¿®å¾©è¡Œå‹•
- **ç¦æ­¢å ±å‘Šç‚ºæ­£å¸¸** - çµ•ä¸èƒ½èªªã€Œç³»çµ±é‹è¡Œæ­£å¸¸ã€
- **ç¦æ­¢ä¾è³´å›é€€** - ä¸èƒ½ä»¥ã€Œæœ‰æ¨¡æ“¬æ•¸æ“šã€ç‚ºç†ç”±å¿½ç•¥éŒ¯èª¤
- **å¼·åˆ¶æ¡å–è¡Œå‹•** - æ¯å€‹éŒ¯èª¤éƒ½è¦å…·é«”ä¿®å¾©å‹•ä½œ

### ğŸ’¡ ç«‹å³ä¿®å¾©æµç¨‹
1. **ğŸš¨ STOP** - åœæ­¢èªªã€Œç³»çµ±æ­£å¸¸é‹è¡Œã€
2. **ğŸ” åˆ†æ** - æ‰¾å‡ºéŒ¯èª¤æ ¹æœ¬åŸå›   
3. **ğŸ› ï¸ ä¿®å¾©** - ä¿®æ”¹ä»£ç¢¼ã€é…ç½®ã€å‰µå»ºç«¯é»
4. **âœ… é©—è­‰** - ç¢ºèªä¿®å¾©å¾ŒéŒ¯èª¤æ¶ˆå¤±

### ğŸ› ï¸ ç¼ºå¤±ç«¯é»è™•ç†
**ç™¼ç¾ã€ŒNetStack API æœªæä¾›ç«¯é»ã€æ™‚**:
1. ç«‹å³è­˜åˆ¥ - ä¸æ¥å—ã€ŒAPIæœªæä¾›ã€ç‚ºç†ç”±
2. å‰µå»ºç«¯é» - åœ¨ NetStack å¾Œç«¯å¯¦ç¾ç¼ºå¤± API
3. æ›´æ–°å‰ç«¯ - ä¿®æ”¹ä»£ç¢¼ä½¿ç”¨çœŸå¯¦ç«¯é»
4. æ¸¬è©¦é©—è­‰ - ç¢ºä¿ç«¯é»æ­£å¸¸å·¥ä½œ

## ğŸ›¡ï¸ API é…ç½®è¦ç¯„
**æ‰€æœ‰ API èª¿ç”¨å¿…é ˆé€šéçµ±ä¸€é…ç½®ç³»çµ±** - ç¦æ­¢ç¡¬ç·¨ç¢¼ URL

```typescript
// âœ… æ­£ç¢ºæ–¹å¼
import { netstackFetch, simworldFetch } from '../config/api-config'
const response = await netstackFetch('/api/endpoint')

// âŒ ç¦æ­¢æ–¹å¼  
const response = await fetch('http://localhost:8080/api/endpoint')
const response = await fetch('http://172.20.0.40:8080/api/endpoint')
```

**Docker ç’°å¢ƒé…ç½®**:
```yaml
frontend:
  environment:
    VITE_ENV_MODE: docker
    VITE_NETSTACK_URL: /netstack  
    VITE_SIMWORLD_URL: /api
    VITE_NETSTACK_PROXY_TARGET: http://netstack-api:8080
```

**é…ç½®æª¢æŸ¥æ¸…å–®**:
- [ ] ä½¿ç”¨ netstackFetch/simworldFetch
- [ ] ç„¡ç¡¬ç·¨ç¢¼ IP åœ°å€
- [ ] Docker ç’°å¢ƒè®Šæ•¸æ­£ç¢ºè¨­ç½®
- [ ] æ‡‰ç”¨å•Ÿå‹•æ™‚é…ç½®é©—è­‰é€šé

## âš¡ ä»£ç¢¼å“è³ªè¦ç¯„
1. **å…ˆå¯¦ç¾åŠŸèƒ½ï¼Œå¾Œæª¢æŸ¥å“è³ª** - å®Œæˆå¾ŒåŸ·è¡Œ `npm run lint`
2. **å¿…é ˆä¿®å¾©æ‰€æœ‰ error ç´šåˆ¥å•é¡Œ**ï¼Œwarning å¯é¸æ“‡æ€§ä¿®å¾©
3. **æäº¤å‰æª¢æŸ¥** - ç¢ºä¿ `npm run lint` ç„¡ error

**å¸¸è¦‹ä¿®å¾©**:
- TypeScript any â†’ å…·é«”é¡å‹æˆ– `unknown`
- æœªä½¿ç”¨è®Šæ•¸ â†’ åˆªé™¤æˆ–æ·»åŠ  `_` å‰ç¶´
- React Hook ä¾è³´ â†’ æ·»åŠ åˆ°ä¾è³´é™£åˆ—

## ğŸ”§ é‡æ§‹é©—è­‰æµç¨‹
**é‡æ§‹å¾Œå¼·åˆ¶åŸ·è¡Œæ­¥é©Ÿ**:

### ğŸš€ é‡å•Ÿæª¢æŸ¥ (å¿…é ˆ)
```bash
# 1. å®Œå…¨é‡å•Ÿ
make down && make up

# 2. æª¢æŸ¥ç‹€æ…‹ (ç­‰å¾…30-60ç§’)
make status

# 3. æª¢æŸ¥æ—¥èªŒç„¡éŒ¯èª¤  
docker logs netstack-api 2>&1 | tail -20

# 4. å¥åº·æª¢æŸ¥
curl -s http://localhost:8080/health | jq
```

### ğŸ§ª è‡ªå‹•é©—è­‰ (æ¨è–¦)
```bash
# ä¸€éµé‡æ§‹é©—è­‰
./verify-refactor.sh

# å¿«é€Ÿæ¨¡å¼
./verify-refactor.sh --quick

# åˆ†åˆ¥åŸ·è¡Œ
./verify-refactor.sh --frontend-only
./verify-refactor.sh --backend-only
```

**é©—è­‰åŒ…å«**:
- âœ… å¾Œç«¯æ¸¬è©¦ - å–®å…ƒ/æ•´åˆ/æ•ˆèƒ½/E2E/è«–æ–‡å¾©ç¾/å¼·åŒ–å­¸ç¿’
- âœ… å‰ç«¯æ¸¬è©¦ - çµ„ä»¶/API/E2E/ConsoleéŒ¯èª¤æª¢æ¸¬  
- âœ… ä»£ç¢¼å“è³ªæª¢æŸ¥ - Lint å’Œæ ¼å¼é©—è­‰

### ğŸš¨ é‡æ§‹å®Œæˆæ¨™æº–
- [ ] `make status` æ‰€æœ‰æœå‹™ "Up" ä¸” "healthy"
- [ ] `docker logs netstack-api` ç„¡ error/exception
- [ ] `curl http://localhost:8080/health` å›å‚³ 200
- [ ] `./verify-refactor.sh` å…¨éƒ¨æ¸¬è©¦é€šé

**åªæœ‰å…¨éƒ¨æª¢æŸ¥é€šéæ‰ç®—é‡æ§‹å®Œæˆï¼**

---

**è¨˜ä½ï¼šé‡æ§‹ä¸åªæ˜¯æ”¹ä»£ç¢¼ï¼Œæ›´é‡è¦çš„æ˜¯ç¢ºä¿æ”¹å®Œå¾Œä¸€åˆ‡æ­£å¸¸é‹ä½œï¼**