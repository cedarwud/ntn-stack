# è¡›æ˜Ÿæ™ºèƒ½ç¯©é¸ç³»çµ± - éšæ®µäºŒé–‹ç™¼

> **ä¾æ“š**ï¼š[@docs/satellite_data_preprocessing.md](../docs/satellite_data_preprocessing.md) éšæ®µäºŒè™•ç†é †åºå„ªåŒ–

## ğŸ¯ éšæ®µäºŒï¼šæ™ºèƒ½è¡›æ˜Ÿç¯©é¸ç³»çµ±

**æ ¸å¿ƒç›®çš„**ï¼šåŸºæ–¼å¯¦éš›å¯è¦‹æ€§å’Œæ›æ‰‹éœ€æ±‚é€²è¡Œå‹•æ…‹ç¯©é¸ï¼Œå¾ 8,715 é¡†è¡›æ˜Ÿç¯©é¸åˆ°ç›®æ¨™é…ç½®æ•¸é‡

### ğŸ“‹ å¯¦éš›è·è²¬ç¯„åœ

- **è¼¸å…¥**ï¼š8,715 é¡†è¡›æ˜Ÿå®Œæ•´è»Œé“æ•¸æ“šï¼ˆéšæ®µä¸€ SGP4 è¨ˆç®—çµæœï¼‰
- **è™•ç†é‚è¼¯**ï¼šæ˜Ÿåº§åˆ†é›¢ â†’ åœ°ç†ç¯©é¸ â†’ æ›æ‰‹é©ç”¨æ€§è©•åˆ†
- **è¼¸å‡º**ï¼šåŸºæ–¼é…ç½®åƒæ•¸ç¯©é¸çš„è¡›æ˜Ÿå­é›†ï¼ˆå¦‚ 555 Starlink + 134 OneWebï¼‰
- **æ•ˆç‡æå‡**ï¼šæ¸›å°‘ç´„80%ä¸ç›¸é—œè¡›æ˜Ÿï¼Œå¤§å¹…é™ä½å¾ŒçºŒä¿¡è™Ÿè¨ˆç®—æˆæœ¬

### ğŸ”§ æŠ€è¡“æ¨¡çµ„æ¶æ§‹

```
stage2_intelligent_filtering/
â”œâ”€â”€ constellation_separation/     # æ˜Ÿåº§åˆ†é›¢ç¯©é¸é‚è¼¯
â”‚   â”œâ”€â”€ constellation_separator.py
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ geographic_filtering/         # åœ°ç†ç›¸é—œæ€§ç¯©é¸  
â”‚   â”œâ”€â”€ geographic_filter.py
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ handover_scoring/            # æ›æ‰‹é©ç”¨æ€§è©•åˆ†
â”‚   â”œâ”€â”€ handover_scorer.py
â”‚   â””â”€â”€ README.md
â””â”€â”€ README.md                    # æœ¬æ–‡æª”
```

## ğŸ“‹ å®Œæ•´è™•ç†æµç¨‹

### ğŸ”„ éšæ®µ 2.1ï¼šæ˜Ÿåº§åˆ†é›¢ç¯©é¸
> **æ–‡æª”**: [constellation_separation/README.md](./constellation_separation/README.md)

**æ ¸å¿ƒåŸå‰‡**: Starlink å’Œ OneWeb **å®Œå…¨åˆ†é›¢è™•ç†**ï¼Œ**ç¦ç”¨è·¨æ˜Ÿåº§æ›æ‰‹**

**æŠ€è¡“ç‰¹æ€§**:
- **è·¨æ˜Ÿåº§æ›æ‰‹**: æŠ€è¡“ä¸Šä¸å¯è¡Œï¼Œå®Œå…¨ç¦ç”¨
- **ç¨ç«‹ç¯©é¸**: æ¯å€‹æ˜Ÿåº§æ¡ç”¨å„è‡ªæœ€ä½³ç¯©é¸ç­–ç•¥  
- **æ˜Ÿåº§ç‰¹å®šé…ç½®**: åŸºæ–¼Ku/Kaé »æ®µå·®ç•°å„ªåŒ–

**è™•ç†çµæœ**:
```python
{
    "starlink": [...],  # ~8,064 é¡† â†’ æ˜Ÿåº§ç‰¹å®šç¯©é¸
    "oneweb": [...]     # ~651 é¡† â†’ æ˜Ÿåº§ç‰¹å®šç¯©é¸
}
```

### ğŸ¯ éšæ®µ 2.2ï¼šåœ°ç†ç›¸é—œæ€§ç¯©é¸  
> **æ–‡æª”**: [geographic_filtering/README.md](./geographic_filtering/README.md)

**ç›®æ¨™ä½ç½®**: å°ç£ NTPU (24.9441Â°N, 121.3713Â°E)

**ç¯©é¸æ¨™æº–**:
- **è»Œé“å‚¾è§’åŒ¹é…**: è»Œé“å‚¾è§’ > è§€æ¸¬é»ç·¯åº¦
- **å¯è¦‹æ€§æª¢æŸ¥**: å¿…é ˆæœ‰å¯è¦‹æ™‚é–“é»ï¼ˆä»°è§’ â‰¥ 0Â°ï¼‰
- **åœ°ç†ç›¸é—œæ€§è©•åˆ†**: 0-100 åˆ†ç¶œåˆè©•ä¼°

**è©•åˆ†æ¬Šé‡**:
- è»Œé“å‚¾è§’é©ç”¨æ€§ (30%) + å¯è¦‹æ€§çµ±è¨ˆ (40%) + é«˜åº¦å„ªåŒ– (20%) + è¦†è“‹æŒçºŒæ€§ (10%)

### ğŸ“Š éšæ®µ 2.3ï¼šæ›æ‰‹é©ç”¨æ€§è©•åˆ†
> **æ–‡æª”**: [handover_scoring/README.md](./handover_scoring/README.md)

**æ˜Ÿåº§ç‰¹å®šè©•åˆ†é‚è¼¯**:

#### Starlink è©•åˆ† (é‡å° 53Â°/550km å„ªåŒ–)
- è»Œé“å‚¾è§’é©ç”¨æ€§ (30%) + é«˜åº¦é©ç”¨æ€§ (25%) + ç›¸ä½åˆ†æ•£åº¦ (20%) + æ›æ‰‹é »ç‡ (15%) + ä¿¡è™Ÿç©©å®šæ€§ (10%)

#### OneWeb è©•åˆ† (é‡å° 87Â°/1200km å„ªåŒ–) 
- è»Œé“å‚¾è§’é©ç”¨æ€§ (25%) + é«˜åº¦é©ç”¨æ€§ (25%) + æ¥µåœ°è¦†è“‹ (20%) + è»Œé“å½¢ç‹€ (20%) + ç›¸ä½åˆ†æ•£ (10%)

**é¸æ“‡ç­–ç•¥**:
- æŒ‰è©•åˆ†é™åºæ’åˆ—ï¼Œé¸æ“‡é ‚ç´šè¡›æ˜Ÿå­é›†
- æ”¯æ´éˆæ´»çš„æ•¸é‡é…ç½®ï¼ˆå¦‚ 555+134, 150+50ï¼‰

## ğŸš€ å®Œæ•´ä½¿ç”¨ç¯„ä¾‹

```python
from constellation_separation.constellation_separator import ConstellationSeparator
from geographic_filtering.geographic_filter import GeographicFilter  
from handover_scoring.handover_scorer import HandoverScorer

# å®Œæ•´éšæ®µäºŒè™•ç†æµç¨‹
def stage2_intelligent_filtering(stage1_data, selection_config):
    # Step 1: æ˜Ÿåº§åˆ†é›¢
    separator = ConstellationSeparator()
    separated_data = separator.separate_constellations(stage1_data)
    constellation_filtered = separator.apply_constellation_specific_filtering(separated_data)
    
    # Step 2: åœ°ç†ç›¸é—œæ€§ç¯©é¸
    geo_filter = GeographicFilter()
    geo_filtered = geo_filter.apply_geographic_filtering(constellation_filtered)
    
    # Step 3: æ›æ‰‹é©ç”¨æ€§è©•åˆ†å’Œé¸æ“‡
    scorer = HandoverScorer()
    scored_data = scorer.apply_handover_scoring(geo_filtered)
    
    # åŸºæ–¼é…ç½®é¸æ“‡é ‚ç´šè¡›æ˜Ÿ
    selected_satellites = scorer.select_top_satellites(scored_data, selection_config)
    
    return selected_satellites

# ä½¿ç”¨ç¯„ä¾‹
stage1_output = load_stage1_data()  # 8,715 é¡†è¡›æ˜Ÿæ•¸æ“š
selection_config = {"starlink": 555, "oneweb": 134}

final_satellites = stage2_intelligent_filtering(stage1_output, selection_config)
```

## ğŸ“Š é æœŸæ•ˆæœåˆ†æ

### ç¯©é¸æ•ˆç‡

```
è™•ç†æµç¨‹æ•ˆæœ:
â”œâ”€â”€ è¼¸å…¥: 8,715 é¡†è¡›æ˜Ÿ (100%)
â”œâ”€â”€ æ˜Ÿåº§åˆ†é›¢: ~8,715 é¡† â†’ åˆ†é›¢è™•ç†
â”œâ”€â”€ åœ°ç†ç¯©é¸: ~æ¸›å°‘ 80% ä¸ç›¸é—œè¡›æ˜Ÿ
â”œâ”€â”€ æ›æ‰‹è©•åˆ†: è©•åˆ†æ’åºå’Œæ™ºèƒ½é¸æ“‡
â””â”€â”€ è¼¸å‡º: 150-555 é¡†è¡›æ˜Ÿ (ä¾é…ç½®è€Œå®š)
```

### è³ªé‡æå‡

- **ç¯©é¸ç²¾åº¦**: åŸºæ–¼çœŸå¯¦è»Œé“æ•¸æ“šçš„å¤šç¶­åº¦è©•ä¼°
- **æ˜Ÿåº§å„ªåŒ–**: é‡å°ä¸åŒæ˜Ÿåº§çš„ç‰¹æ€§å„ªåŒ–
- **åœ°ç†ç›¸é—œ**: é‡å° NTPU è§€æ¸¬é»çš„åœ°ç†å„ªåŒ–
- **æ›æ‰‹é©ç”¨**: åŸºæ–¼æ›æ‰‹éœ€æ±‚çš„æ™ºèƒ½è©•åˆ†é¸æ“‡

## âš ï¸ é‡è¦æ¾„æ¸…

**æ•¸é‡é…ç½®ä¾†æº**ï¼š
- 150+50ã€555+134 ç­‰é…ç½®ä¾†è‡ª**ç³»çµ±åƒæ•¸**ï¼Œééšæ®µäºŒæ±ºå®š
- ä¾†è‡ªå®Œæ•´è»Œé“é€±æœŸåˆ†æçµæœï¼ˆv4.0 çªç ´ï¼‰
- éšæ®µäºŒ**æ¥å—**é€™äº›é…ç½®ï¼Œå¯¦ç¾å°æ‡‰çš„ç¯©é¸é‚è¼¯

**éšæ®µäºŒä¸è² è²¬**ï¼š
- âŒ æ±ºå®šè¡›æ˜Ÿæ•¸é‡é…ç½®
- âŒ å‹•æ…‹æ•¸é‡é…ç½®æ±ºç­–  
- âŒ ç³»çµ±åƒæ•¸è¨­å®š

**éšæ®µäºŒè² è²¬**ï¼š
- âœ… å¯¦ç¾ç¯©é¸ç®—æ³•
- âœ… æ˜Ÿåº§åˆ†é›¢è™•ç†
- âœ… åœ°ç†ç›¸é—œæ€§å„ªåŒ–
- âœ… æ›æ‰‹é©ç”¨æ€§è©•åˆ†

## ğŸ“ˆ é–‹ç™¼ç‹€æ…‹

- âœ… **æ˜Ÿåº§åˆ†é›¢ç¯©é¸**: å®Œæ•´å¯¦ç¾ï¼Œæ”¯æ´ Starlink/OneWeb åˆ†é›¢è™•ç†
- âœ… **åœ°ç†ç›¸é—œæ€§ç¯©é¸**: å®Œæ•´å¯¦ç¾ï¼ŒNTPU è§€æ¸¬é»å„ªåŒ–  
- âœ… **æ›æ‰‹é©ç”¨æ€§è©•åˆ†**: å®Œæ•´å¯¦ç¾ï¼Œæ˜Ÿåº§ç‰¹å®šè©•åˆ†é‚è¼¯
- âœ… **çµ±ä¸€ä»‹é¢**: æä¾›å®Œæ•´çš„éšæ®µäºŒè™•ç†æµç¨‹

---

**ä¾æ“š @docs/satellite_data_preprocessing.md çš„éšæ®µäºŒè™•ç†é †åºå„ªåŒ–æ¶æ§‹å®Œæ•´å¯¦ç¾**