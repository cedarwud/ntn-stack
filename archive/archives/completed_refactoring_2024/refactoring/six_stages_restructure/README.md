# å…­éšæ®µè™•ç†å™¨é‡æ§‹ç¸½è¨ˆåŠƒ

## ğŸ¯ é‡æ§‹ç›®æ¨™

### æ ¸å¿ƒå•é¡Œ
- **æ–‡ä»¶éå¤§**: Stage 5 (3,400è¡Œ)ã€Stage 6 (2,662è¡Œ)ã€Stage 1-4 (1,600-1,900è¡Œ)
- **æ¶æ§‹æ··äº‚**: æ‰€æœ‰éšæ®µå¹³é‹ªåœ¨ `/stages/` ç›®éŒ„ä¸‹
- **ç¶­è­·å›°é›£**: å–®ä¸€å¤§æ–‡ä»¶ï¼Œèª¿è©¦å’Œæ¸¬è©¦è¤‡é›œ
- **è·è²¬ä¸æ¸…**: è™•ç†é‚è¼¯ã€é©—è­‰ã€è¼¸å‡ºæ··é›œ
- **ä»£ç¢¼é‡è¤‡**: å„éšæ®µéƒ½æœ‰ç›¸ä¼¼çš„é©—è­‰å’Œè¼¸å‡ºé‚è¼¯

### é‡æ§‹ç›®æ¨™
1. **æ¨¡çµ„åŒ–**: å°‡æ¯å€‹éšæ®µæ‹†åˆ†ç‚ºå¯ç®¡ç†çš„å°æ¨¡çµ„
2. **æ¨™æº–åŒ–**: å»ºç«‹çµ±ä¸€çš„éšæ®µè™•ç†å™¨æ¥å£
3. **å¯ç¶­è­·æ€§**: å–®ä¸€è·è²¬ã€æ¸…æ™°çš„ä¾è³´é—œä¿‚
4. **å¯æ“´å±•æ€§**: æ–¹ä¾¿æ–°å¢éšæ®µå’ŒåŠŸèƒ½
5. **å¯æ¸¬è©¦æ€§**: æ¯å€‹æ¨¡çµ„éƒ½å¯ç¨ç«‹æ¸¬è©¦

## ğŸ“ æ–°æ¶æ§‹è¨­è¨ˆ

### ç›®æ¨™ç›®éŒ„çµæ§‹
```
netstack/src/pipeline/
â”œâ”€â”€ README.md                          # æ¶æ§‹èªªæ˜
â”œâ”€â”€ __init__.py
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“ shared/                          # å…±ç”¨çµ„ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base_processor.py              # æŠ½è±¡åŸºé¡
â”‚   â”œâ”€â”€ stage_interface.py             # æ¨™æº–æ¥å£å®šç¾©
â”‚   â”œâ”€â”€ validation_framework.py        # çµ±ä¸€é©—è­‰æ¡†æ¶
â”‚   â”œâ”€â”€ output_handler.py              # çµ±ä¸€è¼¸å‡ºè™•ç†
â”‚   â”œâ”€â”€ metrics_collector.py           # æŒ‡æ¨™æ”¶é›†
â”‚   â”œâ”€â”€ data_lineage_tracker.py        # æ•¸æ“šè¡€çµ±è¿½è¹¤
â”‚   â””â”€â”€ pipeline_coordinator.py        # æµç¨‹å”èª¿å™¨
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“ stages/                          # å…­å€‹éšæ®µè™•ç†å™¨
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ 
â”‚   â”œâ”€â”€ ğŸ“ stage1_orbital_calculation/  # éšæ®µä¸€ï¼šè»Œé“è¨ˆç®—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ processor.py               # ä¸»è™•ç†å™¨ (~200è¡Œ)
â”‚   â”‚   â”œâ”€â”€ tle_data_loader.py         # TLEæ•¸æ“šè¼‰å…¥ (~300è¡Œ)
â”‚   â”‚   â”œâ”€â”€ orbital_calculator.py      # SGP4è»Œé“è¨ˆç®— (~400è¡Œ)
â”‚   â”‚   â”œâ”€â”€ validator.py               # é©—è­‰é‚è¼¯ (~300è¡Œ)
â”‚   â”‚   â”œâ”€â”€ output_handler.py          # è¼¸å‡ºè™•ç† (~100è¡Œ)
â”‚   â”‚   â””â”€â”€ config.py                  # é…ç½®åƒæ•¸
â”‚   â”œâ”€â”€ 
â”‚   â”œâ”€â”€ ğŸ“ stage2_visibility_filter/   # éšæ®µäºŒï¼šå¯è¦‹æ€§éæ¿¾
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ processor.py
â”‚   â”‚   â”œâ”€â”€ elevation_filter.py
â”‚   â”‚   â”œâ”€â”€ visibility_calculator.py
â”‚   â”‚   â”œâ”€â”€ validator.py
â”‚   â”‚   â””â”€â”€ config.py
â”‚   â”œâ”€â”€ 
â”‚   â”œâ”€â”€ ğŸ“ stage3_timeseries_preprocessing/ # éšæ®µä¸‰ï¼šæ™‚é–“åºåˆ—é è™•ç†
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ processor.py
â”‚   â”‚   â”œâ”€â”€ timeseries_cleaner.py
â”‚   â”‚   â”œâ”€â”€ feature_extractor.py
â”‚   â”‚   â”œâ”€â”€ validator.py
â”‚   â”‚   â””â”€â”€ config.py
â”‚   â”œâ”€â”€ 
â”‚   â”œâ”€â”€ ğŸ“ stage4_signal_analysis/     # éšæ®µå››ï¼šä¿¡è™Ÿåˆ†æ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ processor.py
â”‚   â”‚   â”œâ”€â”€ rsrp_calculator.py
â”‚   â”‚   â”œâ”€â”€ signal_quality_analyzer.py
â”‚   â”‚   â”œâ”€â”€ validator.py
â”‚   â”‚   â””â”€â”€ config.py
â”‚   â”œâ”€â”€ 
â”‚   â”œâ”€â”€ ğŸ“ stage5_data_integration/    # éšæ®µäº”ï¼šæ•¸æ“šæ•´åˆ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ processor.py
â”‚   â”‚   â”œâ”€â”€ data_merger.py
â”‚   â”‚   â”œâ”€â”€ consistency_checker.py
â”‚   â”‚   â”œâ”€â”€ validator.py
â”‚   â”‚   â””â”€â”€ config.py
â”‚   â””â”€â”€ 
â”‚   â””â”€â”€ ğŸ“ stage6_dynamic_planning/    # éšæ®µå…­ï¼šå‹•æ…‹è¦åŠƒ
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ processor.py
â”‚       â”œâ”€â”€ pool_optimizer.py
â”‚       â”œâ”€â”€ handover_planner.py
â”‚       â”œâ”€â”€ validator.py
â”‚       â””â”€â”€ config.py
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“ utils/                          # å·¥å…·å‡½æ•¸
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ file_helpers.py
â”‚   â”œâ”€â”€ time_helpers.py
â”‚   â”œâ”€â”€ math_helpers.py
â”‚   â””â”€â”€ logging_helpers.py
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“ tests/                          # æ¸¬è©¦
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_shared/
â”‚   â”œâ”€â”€ test_stages/
â”‚   â”‚   â”œâ”€â”€ test_stage1/
â”‚   â”‚   â”œâ”€â”€ test_stage2/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ integration/
â””â”€â”€ 
â””â”€â”€ ğŸ“ scripts/                        # åŸ·è¡Œè…³æœ¬
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ run_pipeline.py                # ä¸»åŸ·è¡Œè…³æœ¬
    â”œâ”€â”€ run_single_stage.py           # å–®éšæ®µåŸ·è¡Œ
    â”œâ”€â”€ validate_pipeline.py          # ç®¡é“é©—è­‰
    â””â”€â”€ migration_tools.py            # é·ç§»å·¥å…·
```

### èˆŠæ¶æ§‹ vs æ–°æ¶æ§‹å°æ¯”
```
èˆŠæ¶æ§‹ (å•é¡Œå¤š):
/netstack/src/stages/
â”œâ”€â”€ orbital_calculation_processor.py     (1,833è¡Œ)
â”œâ”€â”€ satellite_visibility_filter_processor.py (1,731è¡Œ)
â”œâ”€â”€ timeseries_preprocessing_processor.py    (1,646è¡Œ)
â”œâ”€â”€ signal_analysis_processor.py             (1,862è¡Œ)
â”œâ”€â”€ data_integration_processor.py            (3,400è¡Œ) âŒ
â””â”€â”€ dynamic_pool_planner.py                  (2,662è¡Œ) âŒ

æ–°æ¶æ§‹ (æ¸…æ™°æ¨¡çµ„åŒ–):
/netstack/src/pipeline/stages/stage1_orbital_calculation/
â”œâ”€â”€ processor.py                        (~200è¡Œ)
â”œâ”€â”€ tle_data_loader.py                  (~300è¡Œ)
â”œâ”€â”€ orbital_calculator.py               (~400è¡Œ)
â”œâ”€â”€ validator.py                        (~300è¡Œ)
â””â”€â”€ output_handler.py                   (~100è¡Œ)
```

## â±ï¸ å¯¦æ–½æ™‚é–“ç·š

### Phase 1: åŸºç¤æ¶æ§‹ (1-2é€±)
1. å‰µå»ºæ–°ç›®éŒ„çµæ§‹
2. å¯¦æ–½ shared æ¨¡çµ„ (base_processor, stage_interface)
3. å»ºç«‹æ¸¬è©¦æ¡†æ¶
4. ç·¨å¯«é·ç§»å·¥å…·

### Phase 2: Stage 1 é‡æ§‹ (1é€±) - ä½œç‚ºç¯„æœ¬
1. æ‹†åˆ† `orbital_calculation_processor.py`
2. å¯¦æ–½æ–°æ¥å£
3. å–®å…ƒæ¸¬è©¦
4. é›†æˆæ¸¬è©¦

### Phase 3: å…¶ä»–éšæ®µé‡æ§‹ (3-4é€±)
1. Stage 5 (æœ€é«˜å„ªå…ˆç´šï¼Œ3,400è¡Œ)
2. Stage 6 (é«˜å„ªå…ˆç´šï¼Œ2,662è¡Œ)
3. Stage 4 (1,862è¡Œ)
4. Stage 2-3 (1,600-1,700è¡Œ)

### Phase 4: æ•´åˆå„ªåŒ– (1é€±)
1. æ€§èƒ½æ¸¬è©¦
2. æ–‡æª”å®Œå–„
3. èˆŠä»£ç¢¼æ¸…ç†

**ç¸½è¨ˆæ™‚é–“: 6-8é€±**

## ğŸš¨ é¢¨éšªè©•ä¼°

### é«˜é¢¨éšª
- **ç³»çµ±ä¸­æ–·**: é‡æ§‹æœŸé–“å¯èƒ½å½±éŸ¿ç”Ÿç”¢ç’°å¢ƒ
- **åŠŸèƒ½å›æ­¸**: é‡æ§‹å¯èƒ½å¼•å…¥æ–°bug
- **ä¾è³´ç ´å£**: å…¶ä»–æ¨¡çµ„ä¾è³´èˆŠæ¥å£

### é¢¨éšªç·©è§£ç­–ç•¥
1. **åˆ†éšæ®µå¯¦æ–½**: ä¸€æ¬¡åªé‡æ§‹ä¸€å€‹éšæ®µ
2. **å‘å¾Œå…¼å®¹**: ä¿æŒèˆŠæ¥å£å¯ç”¨ï¼Œé€æ­¥é·ç§»
3. **å®Œæ•´æ¸¬è©¦**: æ¯å€‹éšæ®µéƒ½æœ‰å–®å…ƒæ¸¬è©¦å’Œé›†æˆæ¸¬è©¦
4. **å›é€€è¨ˆåŠƒ**: æ¯å€‹éšæ®µéƒ½å¯å¿«é€Ÿå›é€€åˆ°èˆŠç‰ˆæœ¬

## ğŸ“‹ å¯¦æ–½æª¢æŸ¥æ¸…å–®

### æº–å‚™éšæ®µ âœ…
- [ ] å‰µå»ºé‡æ§‹æ–‡æª”
- [ ] è¨­è¨ˆæ–°æ¶æ§‹
- [ ] å»ºç«‹æ¸¬è©¦ç’°å¢ƒ
- [ ] å‚™ä»½ç¾æœ‰ä»£ç¢¼

### Phase 1: åŸºç¤æ¶æ§‹ 
- [ ] å‰µå»ºç›®éŒ„çµæ§‹
- [ ] å¯¦æ–½åŸºç¤é¡å’Œæ¥å£
- [ ] å»ºç«‹æ¸¬è©¦æ¡†æ¶
- [ ] é©—è­‰æ¶æ§‹å¯è¡Œæ€§

### Phase 2: Stage 1 é‡æ§‹
- [ ] åˆ†æç¾æœ‰ Stage 1 åŠŸèƒ½
- [ ] æ‹†åˆ†ç‚ºå°æ¨¡çµ„
- [ ] å¯¦æ–½æ–°æ¥å£
- [ ] ç·¨å¯«å–®å…ƒæ¸¬è©¦
- [ ] é›†æˆæ¸¬è©¦é€šé

### Phase 3-6: å…¶ä»–éšæ®µ
- [ ] Stage 5 é‡æ§‹
- [ ] Stage 6 é‡æ§‹  
- [ ] Stage 4 é‡æ§‹
- [ ] Stage 2-3 é‡æ§‹

### å®Œæˆéšæ®µ
- [ ] æ€§èƒ½é©—è­‰
- [ ] æ–‡æª”æ›´æ–°
- [ ] èˆŠä»£ç¢¼æ¸…ç†
- [ ] éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ

## ğŸ“š ç›¸é—œæ–‡æª”

- [æ¶æ§‹è¨­è¨ˆè©³ç´°èªªæ˜](./architecture_design.md)
- [çµ±ä¸€æ¥å£è¦ç¯„](./interface_specification.md) 
- [å¯¦æ–½è©³ç´°æ­¥é©Ÿ](./implementation_steps.md)
- [æ¸¬è©¦ç­–ç•¥](./testing_strategy.md)
- [é¢¨éšªç®¡ç†è¨ˆåŠƒ](./risk_management.md)

---

**é‡è¦æé†’**: é€™æ˜¯ä¸€å€‹å¤§å‹é‡æ§‹é …ç›®ï¼Œéœ€è¦ä»”ç´°è¦åŠƒå’ŒåŸ·è¡Œã€‚å»ºè­°åœ¨é–‹å§‹å‰èˆ‡åœ˜éšŠå……åˆ†è¨è«–ï¼Œç¢ºä¿æ‰€æœ‰äººç†è§£è®Šæ›´å½±éŸ¿ã€‚