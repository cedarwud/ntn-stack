# 真實歷史軌跡動畫 - 漸進升級計劃

## 🎯 當前狀態 (簡化版 v1.0)

### ✅ 已實現
- **基於真實數據的軌跡生成**: 使用真實的仰角、方位角、距離作為基礎
- **動態軌道動畫**: 每顆衛星21個軌跡點，10分鐘週期
- **60倍加速播放**: 可觀察到衛星軌道運動
- **真實天球座標**: 正確的球面座標到笛卡爾座標轉換

### 📊 技術特點
- **軌跡點數**: 21點/衛星 (30秒間隔)
- **時間週期**: 10分鐘軌道段
- **動畫基礎**: 真實仰角±8°、方位角45°變化
- **距離變化**: ±50km軌道振盪
- **3D渲染**: 真實的天球座標系統

## 🚀 漸進升級路徑

### 📅 Phase 1.5: 數據源升級 (下一步)
- **目標**: 使用完整的預處理歷史數據
- **數據源**: 2277顆衛星的真實軌跡數據
- **時間範圍**: 6分鐘 - 97分鐘真實軌道段
- **實現方式**: 創建 /api/satellites/historical-trajectories 端點

### 📅 Phase 2.0: 完整歷史動畫
- **多軌道週期**: 支援2小時完整軌道數據
- **真實SGP4軌跡**: 直接使用預處理的SGP4計算結果
- **可見窗口同步**: 與真實的visibility_windows完全同步
- **信號強度模擬**: 基於真實仰角的信號強度計算

### 📅 Phase 2.5: 換手動畫準備
- **換手觸發檢測**: 基於真實仰角門檻 (15°→10°→5°)
- **候選衛星識別**: 自動識別最佳換手目標
- **換手時機同步**: 與真實軌道數據的換手時機匹配
- **事件時間軸**: 準確的換手事件時間戳

### 📅 Phase 3.0: 完整生產版
- **實時數據整合**: 結合歷史+實時TLE更新
- **多觀測點支援**: 支援全球任意位置觀測
- **高精度軌道**: 考慮大氣阻力、J2攝動的精確軌道
- **性能優化**: WebGL軌跡渲染、LOD系統

## 🔍 升級檢查點

### v1.0 → v1.5 升級條件
- [ ] 簡化版動畫運行正常
- [ ] 側邊欄數據與3D動畫同步
- [ ] 無明顯性能問題
- [ ] 用戶確認軌跡動畫效果

### v1.5 → v2.0 升級條件  
- [ ] 歷史數據API端點就緒
- [ ] 2277顆衛星數據載入正常
- [ ] 長時間軌跡播放穩定
- [ ] 記憶體使用合理 (<500MB)

## 💡 技術注意事項

### 當前限制 (v1.0)
- 軌跡基於插值生成，非真實SGP4計算
- 10分鐘固定週期，非真實軌道週期
- 簡化的信號強度模型

### 未來增強 (v2.0+)
- 完整SGP4軌道積分
- 變長軌道週期 (6分鐘-97分鐘)
- ITU-R P.618信號模型
- 3GPP NTN標準完全合規

---
*當前版本: v1.0 簡化版 | 下一目標: v1.5 完整數據版*
