# 3GPP TS 38.331 æ¸¬é‡äº‹ä»¶äº’å‹•åœ–è¡¨å¯¦ä½œç‹€æ…‹

## âœ… å·²å®Œæˆé …ç›®

### Event A4 åœ–è¡¨æ ¸å¿ƒåŠŸèƒ½ âœ…
- [x] è¨­ç½® Chart.js å°ˆæ¡ˆç’°å¢ƒï¼ˆreact-chartjs-2, chartjs-plugin-annotationï¼‰
- [x] è§£æ Line-Plot.csv æ•¸æ“šä¸¦è½‰æ›ç‚º Chart.js æ ¼å¼
- [x] å‰µå»º Event A4 åŸºç¤åœ–è¡¨é…ç½®ï¼ˆæ™‚é–“ X è»¸ï¼ŒRSRP dBm Y è»¸ï¼‰
- [x] å¯¦ç¾è—è‰² RSRP æ›²ç·šï¼Œä½¿ç”¨ CSV æ•¸æ“šé»ä¸¦å¹³æ»‘æ¸²æŸ“
- [x] æ·»åŠ ç´…è‰²è™›ç·šé–€æª»ç·šï¼ˆa4-Thresholdï¼‰ä½¿ç”¨è¨»è§£æ’ä»¶
- [x] å¯¦ç¾å‹•ç•«æŒ‰éˆ•å’Œç§»å‹•ç¯€é»ï¼Œæ²¿ RSRP æ›²ç·šæ™‚é–“é€²è¡Œ
- [x] æ·»åŠ äº’å‹•åƒæ•¸æ§åˆ¶ï¼ˆé–¾å€¼ã€é²æ»¯ã€æ™‚é–“åƒæ•¸èª¿æ•´ï¼‰
- [x] å¯¦ç¾éŸ¿æ‡‰å¼è¨­è¨ˆï¼Œé©é…ä¸åŒè¢å¹•å°ºå¯¸

### æª”æ¡ˆçµæ§‹ âœ…
```
simworld/frontend/src/
â”œâ”€â”€ components/domains/measurement/
â”‚   â”œâ”€â”€ charts/EventA4Chart.tsx      # Event A4 ä¸»è¦åœ–è¡¨çµ„ä»¶
â”‚   â”œâ”€â”€ charts/EventA4Chart.scss     # å°ˆæ¥­æ¨£å¼è¨­è¨ˆ
â”‚   â”œâ”€â”€ types/index.ts               # TypeScript é¡å‹å®šç¾©
â”‚   â””â”€â”€ index.ts                     # é ˜åŸŸåŒ¯å‡º
â”œâ”€â”€ pages/MeasurementEventsPage.tsx  # å„€è¡¨æ¿é é¢
â”œâ”€â”€ pages/MeasurementEventsPage.scss # é é¢æ¨£å¼
â”œâ”€â”€ utils/csvDataParser.ts           # æ•¸æ“šè™•ç†å·¥å…·
â””â”€â”€ public/Line-Plot.csv             # RSRP æ›²ç·šæ•¸æ“š
```

## ğŸ”„ é€²è¡Œä¸­é …ç›®

### Event A4 é€²éšè¨»è§£ ğŸ”„
- [ ] æ·»åŠ æ‰€æœ‰ Event A4 è¨»è§£ï¼šTrigger Condition, Cancel Condition, Offset, Hys æ¨™ç±¤èˆ‡ç®­é ­
- [ ] å¯¦ç¾ TimeToTrigger, reportInterval, reportAmount, reportOnLeave æ¨™è¨˜å’Œè¨»è§£
- [ ] å¯¦ç¾è§¸ç™¼æ¢ä»¶é‚è¼¯ï¼ˆMn + Ofn + Ocn â€“ Hys > Threshï¼‰ä¸¦æä¾›è¦–è¦ºåé¥‹

## ğŸ“‹ å¾…å®Œæˆé …ç›®

### Event D1 å¯¦ä½œï¼ˆè·é›¢é–€æª»äº‹ä»¶ï¼‰
- [ ] è¨­è¨ˆ Event D1 åœ–è¡¨çµæ§‹ï¼Œé›™è·é›¢æ›²ç·šï¼ˆUE-referenceLocation1, UE-referenceLocation2ï¼‰å°æ™‚é–“
- [ ] å‰µå»º D1 äº‹ä»¶çš„å…©æ¢è·é›¢æ›²ç·šï¼Œä¸åŒé¡è‰²ï¼ˆç¶ è‰²è·é›¢1ï¼Œæ©™è‰²è·é›¢2ï¼‰
- [ ] æ·»åŠ  D1 é›™é–€æª»ç·šï¼ˆThresh1 å’Œ Thresh2ï¼‰ï¼Œé©ç•¶è·é›¢å–®ä½ï¼ˆå…¬å°ºï¼‰
- [ ] å¯¦ç¾ D1 é›™æ¢ä»¶é‚è¼¯ï¼ˆMl1 > Thresh1 AND Ml2 < Thresh2ï¼‰èˆ‡è¦–è¦ºæŒ‡ç¤ºå™¨

### Event D2 å¯¦ä½œï¼ˆç§»å‹•åƒè€ƒä½ç½®ï¼‰
- [ ] è¨­è¨ˆ Event D2 åœ–è¡¨ï¼Œé¡ä¼¼ D1 ä½†è€ƒæ…®ç§»å‹•åƒè€ƒä½ç½®
- [ ] å¯¦ç¾ D2 ç§»å‹•åƒè€ƒä½ç½®é‚è¼¯å’Œè¡›æ˜Ÿæ˜Ÿæ›†è€ƒé‡

### Event T1 å¯¦ä½œï¼ˆæ™‚é–“çª—å£äº‹ä»¶ï¼‰
- [ ] è¨­è¨ˆ Event T1 æ™‚é–“åŸºç¤åœ–è¡¨ï¼ˆMt > Thresh1 æŒçºŒæ™‚é–“çª—å£ï¼‰
- [ ] å¯¦ç¾ T1 æ™‚é–“çª—å£è¦–è¦ºåŒ–ï¼Œå‚ç›´é–€æª»ç·šå’ŒæŒçºŒæ™‚é–“é«˜äº®

### ç³»çµ±æ•´åˆ
- [ ] å‰µå»ºåœ–è¡¨å°èˆªç³»çµ±ï¼Œåˆ‡æ› A4, D1, D2, T1 åœ–è¡¨è¦–åœ–
- [ ] æ·»åŠ å…¨é¢æ–‡æª”ï¼Œè§£é‡‹æ¯å€‹äº‹ä»¶é¡å‹å’Œåœ–è¡¨äº’å‹•
- [ ] æ¸¬è©¦æ‰€æœ‰åœ–è¡¨ï¼Œä¸åŒåƒæ•¸å€¼ä¸¦é©—è­‰ 3GPP TS 38.331 è¦ç¯„

## ğŸ¯ Event A4 åœ–è¡¨ä½ç½®

**ä¸»è¦æª”æ¡ˆä½ç½®ï¼š**
- **React çµ„ä»¶**: `/home/sat/ntn-stack/simworld/frontend/src/components/domains/measurement/charts/EventA4Chart.tsx`
- **é é¢**: `/home/sat/ntn-stack/simworld/frontend/src/pages/MeasurementEventsPage.tsx`
- **æ•¸æ“š**: `/home/sat/ntn-stack/simworld/frontend/public/Line-Plot.csv`

**å¦‚ä½•è¨ªå•ï¼š**
1. å•Ÿå‹•å‰ç«¯æœå‹™ï¼š`cd /home/sat/ntn-stack/simworld/frontend && npm run dev`
2. ç€è¦½å™¨æ‰“é–‹ï¼š`http://localhost:5173`
3. **æ–¹æ³•ä¸€ - ç›´æ¥ç¶²å€**ï¼šç€è¦½å™¨è¨ªå• `http://localhost:5173/measurement-events`
4. **æ–¹æ³•äºŒ - Navbar æŒ‰éˆ•**ï¼šé»æ“Šé ‚éƒ¨å°èˆªæ¬„çš„ "ğŸ“¡ Event A4" æŒ‰éˆ•

## ğŸ“Š Event A4 åŠŸèƒ½ç‰¹é»

### 3GPP TS 38.331 åˆè¦æ€§ âœ…
- **é€²å…¥æ¢ä»¶ A4-1**: `Mn + Ofn + Ocn â€“ Hys > Thresh`
- **é›¢é–‹æ¢ä»¶ A4-2**: `Mn + Ofn + Ocn + Hys < Thresh`
- **åƒæ•¸ç¯„åœ**: ç¬¦åˆ 3GPP æ¨™æº–å€¼ç¯„åœ
- **æ™‚é–“çª—å£**: TimeToTrigger æ¨™æº–é¸é …

### è¦–è¦ºåŒ–å…ƒç´  âœ…
- è—è‰² RSRP æ›²ç·šï¼ˆé„°å°å€ä¿¡è™Ÿå¼·åº¦ï¼‰
- ç´…è‰²è™›ç·šé–€æª»ç·šï¼ˆa4-Thresholdï¼‰
- é²æ»¯ï¼ˆHysï¼‰ä¸Šä¸‹ç•Œç·š
- ç§»å‹•ç¯€é»å‹•ç•«æ’­æ”¾ç³»çµ±
- å³æ™‚åƒæ•¸èª¿æ•´æ§åˆ¶é¢æ¿

### äº’å‹•åŠŸèƒ½ âœ…
- æ’­æ”¾/æš«åœ/é‡ç½®å‹•ç•«æ§åˆ¶
- å³æ™‚åƒæ•¸èª¿æ•´ï¼ˆé–¾å€¼ã€é²æ»¯ã€åç½®ç­‰ï¼‰
- éŸ¿æ‡‰å¼è¨­è¨ˆæ”¯æ´å¤šç¨®è¨­å‚™
- å°ˆæ¥­æ¨£å¼ç¬¦åˆå·¥ç¨‹æ¨™æº–

## ğŸ”§ æŠ€è¡“è¦æ ¼

- **æ¡†æ¶**: React 19 + TypeScript
- **åœ–è¡¨å¼•æ“**: Chart.js 4.5 + react-chartjs-2
- **è¨»è§£ç³»çµ±**: chartjs-plugin-annotation 3.1
- **æ¨£å¼**: SCSS æ¨¡çµ„åŒ–è¨­è¨ˆ
- **æ•¸æ“šæ ¼å¼**: CSV è§£æèˆ‡è™•ç†
- **å‹•ç•«**: requestAnimationFrame å¹³æ»‘å‹•ç•«

## ğŸ“ˆ ä¸‹ä¸€æ­¥é–‹ç™¼é‡é»

1. **å®Œå–„ Event A4 è¨»è§£ç³»çµ±** - æ·»åŠ æ‰€æœ‰ç®­é ­å’Œæ¨™ç±¤
2. **å¯¦ç¾è§¸ç™¼é‚è¼¯è¦–è¦ºåŒ–** - æ¢ä»¶æ»¿è¶³æ™‚çš„å³æ™‚è¦–è¦ºåé¥‹
3. **é–‹å§‹ Event D1 é–‹ç™¼** - è·é›¢æ¸¬é‡äº‹ä»¶åœ–è¡¨
4. **å»ºç«‹äº‹ä»¶åˆ‡æ›å°èˆª** - çµ±ä¸€çš„å¤šäº‹ä»¶å„€è¡¨æ¿

Event A4 åœ–è¡¨å·²æˆåŠŸå¯¦ç¾ä¸¦å¯ä»¥ä½¿ç”¨ï¼