# ğŸ›°ï¸ éšæ®µäºŒï¼šè»Œé“è¨ˆç®—èˆ‡éˆè·¯å¯è¡Œæ€§è©•ä¼°å±¤

[ğŸ”„ è¿”å›æ–‡æª”ç¸½è¦½](../README.md) > éšæ®µäºŒ

## ğŸ“– éšæ®µæ¦‚è¿°

**ç›®æ¨™**ï¼šæ¥æ”¶Stage 1çš„TLEæ•¸æ“šï¼ŒåŸ·è¡ŒSGP4è»Œé“è¨ˆç®—å’Œè¡›æ˜Ÿéˆè·¯å¯è¡Œæ€§è©•ä¼°
**è¼¸å…¥**ï¼šStage 1çš„é©—è­‰TLEæ•¸æ“š + æ™‚é–“åŸºæº–ï¼ˆè¨˜æ†¶é«”å‚³éï¼‰
**è¼¸å‡º**ï¼šè»Œé“è¨ˆç®—çµæœ + éˆè·¯å¯è¡Œæ€§åˆ†æ â†’ è¨˜æ†¶é«”å‚³éè‡³éšæ®µä¸‰
**æ ¸å¿ƒå·¥ä½œ**ï¼š
1. ä½¿ç”¨æ¨™æº–SGP4/SDP4ç®—æ³•é€²è¡Œè»Œé“å‚³æ’­è¨ˆç®—
2. TEMEâ†’ITRFâ†’WGS84åº§æ¨™ç³»çµ±ç²¾ç¢ºè½‰æ›ï¼ˆä½¿ç”¨Skyfieldå°ˆæ¥­åº«ï¼‰
3. è¨ˆç®—ç›¸å°NTPUè§€æ¸¬é»çš„ä»°è§’ã€æ–¹ä½è§’ã€è·é›¢
4. å¤šé‡ç´„æŸç¯©é¸ï¼š
   - åŸºç¤å¯è¦‹æ€§æª¢æŸ¥ï¼ˆä»°è§’ > 0Â°ï¼‰
   - æ˜Ÿåº§ç‰¹å®šæœå‹™é–€æª»ï¼ˆStarlink: 5Â°, OneWeb: 10Â°ï¼‰
   - éˆè·¯é ç®—ç´„æŸï¼ˆ200-2000kmè·é›¢ç¯„åœï¼‰
   - ç³»çµ±é‚Šç•Œé©—è­‰ï¼ˆåœ°ç†é‚Šç•Œï¼‰

**å¯¦éš›çµæœ**ï¼šç´„500-1000é¡†å¯å»ºç«‹é€šè¨Šéˆè·¯çš„è¡›æ˜Ÿå«å®Œæ•´è»Œé“æ•¸æ“š
**æ™‚é–“åŸºæº–**ï¼šåš´æ ¼ä½¿ç”¨Stage 1æä¾›çš„TLE epochæ™‚é–“
**è™•ç†æ™‚é–“**ï¼šç´„2-3åˆ†é˜ (å®Œæ•´SGP4è»Œé“è¨ˆç®—)

### ğŸ—ï¸ v2.0 æ¨¡çµ„åŒ–æ¶æ§‹

Stage 2 æ¡ç”¨4æ¨¡çµ„è¨­è¨ˆï¼Œå°ˆæ³¨æ–¼è»Œé“è¨ˆç®—æ ¸å¿ƒè·è²¬ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Stage 2: è»Œé“è¨ˆç®—å±¤                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚SGP4 Calculatorâ”‚  â”‚Coordinate   â”‚  â”‚Visibility   â”‚       â”‚
â”‚  â”‚             â”‚  â”‚Converter    â”‚  â”‚Filter       â”‚       â”‚
â”‚  â”‚ â€¢ SGP4å‚³æ’­   â”‚  â”‚             â”‚  â”‚             â”‚       â”‚
â”‚  â”‚ â€¢ SDP4æ·±ç©º   â”‚  â”‚ â€¢ TEMEâ†’ITRF â”‚  â”‚ â€¢ ä»°è§’ç¯©é¸   â”‚       â”‚
â”‚  â”‚ â€¢ ç²¾åº¦æ§åˆ¶   â”‚  â”‚ â€¢ ITRFâ†’WGS84â”‚  â”‚ â€¢ è·é›¢ç¯©é¸   â”‚       â”‚
â”‚  â”‚ â€¢ æ‰¹æ¬¡è¨ˆç®—   â”‚  â”‚ â€¢ åœ°å¿ƒè½‰æ›   â”‚  â”‚ â€¢ åœ°ç†é‚Šç•Œ   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â”‚              â”‚               â”‚                â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                          â–¼                                â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚           â”‚   Stage2 Orbital Processor     â”‚            â”‚
â”‚           â”‚                                 â”‚            â”‚
â”‚           â”‚ â€¢ è¨ˆç®—æµç¨‹å”èª¿                   â”‚            â”‚
â”‚           â”‚ â€¢ æ™‚é–“åºåˆ—ç®¡ç†                   â”‚            â”‚
â”‚           â”‚ â€¢ ä¸¦è¡Œè™•ç†æ§åˆ¶                   â”‚            â”‚
â”‚           â”‚ â€¢ çµæœå“è³ªé©—è­‰                   â”‚            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒåŸå‰‡
- **è¨ˆç®—ç²¾åº¦**: ä½¿ç”¨æ¨™æº–SGP4/SDP4ç®—æ³•ç¢ºä¿è»Œé“è¨ˆç®—ç²¾åº¦
- **æ™‚é–“åŸºæº–**: åš´æ ¼ä½¿ç”¨TLE epochæ™‚é–“ä½œç‚ºè¨ˆç®—åŸºæº–
- **åº§æ¨™æ¨™æº–**: ä½¿ç”¨Skyfieldå°ˆæ¥­åº«é€²è¡Œç²¾ç¢ºåº§æ¨™è½‰æ›
- **éˆè·¯å°å‘**: ç¯©é¸å¯å»ºç«‹é€šè¨Šéˆè·¯çš„è¡›æ˜Ÿï¼Œéç´”å¹¾ä½•å¯è¦‹æ€§
- **æ˜Ÿåº§æ„ŸçŸ¥**: æ”¯æ´ä¸åŒæ˜Ÿåº§çš„ç‰¹å®šæœå‹™é–€æª»æ¨™æº–

## ğŸ“¦ æ¨¡çµ„è¨­è¨ˆ

### 1. SGP4 Calculator (`sgp4_calculator.py`)

#### åŠŸèƒ½è·è²¬
- å¯¦ç¾æ¨™æº–SGP4/SDP4è»Œé“å‚³æ’­ç®—æ³•
- è™•ç†è¿‘åœ°å’Œæ·±ç©ºè¡›æ˜Ÿè»Œé“
- æä¾›é«˜ç²¾åº¦ä½ç½®å’Œé€Ÿåº¦è¨ˆç®—
- æ”¯æ´æ‰¹æ¬¡è¨ˆç®—å’Œæ™‚é–“åºåˆ—ç”Ÿæˆ

#### æ ¸å¿ƒæ–¹æ³•
```python
class SGP4Calculator:
    def calculate_position(self, tle_data, time_since_epoch):
        """è¨ˆç®—æŒ‡å®šæ™‚é–“çš„è¡›æ˜Ÿä½ç½®"""

    def batch_calculate(self, tle_data_list, time_series):
        """æ‰¹æ¬¡è¨ˆç®—å¤šé¡†è¡›æ˜Ÿçš„è»Œé“"""

    def validate_calculation_accuracy(self, results):
        """é©—è­‰è¨ˆç®—ç²¾åº¦"""
```

### 2. Coordinate Converter (`coordinate_converter.py`)

#### åŠŸèƒ½è·è²¬
- TEMEåˆ°ITRFåº§æ¨™ç³»çµ±è½‰æ›
- ITRFåˆ°WGS84åœ°ç†åº§æ¨™è½‰æ›
- åœ°å¿ƒåˆ°åœ°å¹³åº§æ¨™ç³»çµ±è½‰æ›
- æ”¯æ´é«˜ç²¾åº¦æ™‚é–“å’Œæ¥µç§»åƒæ•¸

#### æ ¸å¿ƒæ–¹æ³•
```python
class CoordinateConverter:
    def teme_to_itrf(self, position, velocity, time):
        """TEMEåˆ°ITRFè½‰æ›"""

    def itrf_to_wgs84(self, position):
        """ITRFåˆ°WGS84è½‰æ›"""

    def calculate_look_angles(self, sat_pos, observer_pos):
        """è¨ˆç®—è§€æ¸¬è§’åº¦"""
```

### 3. Link Feasibility Filter (`link_feasibility_filter.py`)

#### åŠŸèƒ½è·è²¬
- åŸºç¤å¯è¦‹æ€§æª¢æŸ¥ï¼ˆå¹¾ä½•å¯è¦‹æ€§ï¼‰
- æ˜Ÿåº§ç‰¹å®šæœå‹™é–€æª»ç¯©é¸ï¼ˆStarlink: 5Â°, OneWeb: 10Â°ï¼‰
- éˆè·¯é ç®—ç´„æŸæª¢æŸ¥ï¼ˆè·é›¢ç¯„åœ200-2000kmï¼‰
- ç³»çµ±é‚Šç•Œé©—è­‰ï¼ˆåœ°ç†é‚Šç•Œï¼‰
- æœå‹™çª—å£è¨ˆç®—ï¼ˆå¯é€šè¨Šæ™‚é–“æ®µï¼‰

> **ğŸ“– æŠ€è¡“é©—è­‰**: è·é›¢è¨ˆç®—æ–¹æ³•çš„ç§‘å­¸ä¾æ“šå’Œåœ‹éš›æ¨™æº–é©—è­‰è©³è¦‹ [è·é›¢è¨ˆç®—é©—è­‰å ±å‘Š](../technical/distance_calculation_validation.md)

#### æ ¸å¿ƒæ–¹æ³•
```python
class LinkFeasibilityFilter:
    def apply_constellation_elevation_threshold(self, satellites, constellation):
        """æ‡‰ç”¨æ˜Ÿåº§ç‰¹å®šä»°è§’é–€æª»ç¯©é¸"""

    def apply_link_budget_constraints(self, satellites):
        """æ‡‰ç”¨éˆè·¯é ç®—ç´„æŸ"""

    def calculate_service_windows(self, satellite_positions):
        """è¨ˆç®—æœå‹™æ™‚é–“çª—å£"""
```

### 4. Stage2 Orbital Processor (`stage2_orbital_computing_processor.py`)

#### åŠŸèƒ½è·è²¬
- å”èª¿æ•´å€‹è»Œé“è¨ˆç®—æµç¨‹
- ç®¡ç†æ™‚é–“åºåˆ—ç”Ÿæˆ
- æ§åˆ¶ä¸¦è¡Œè™•ç†
- é©—è­‰çµæœå“è³ª

## ğŸ”„ æ•¸æ“šæµç¨‹

### è¼¸å…¥è™•ç†
```python
# å¾Stage 1æ¥æ”¶æ•¸æ“š
stage1_output = {
    'tle_records': [...],  # é©—è­‰éçš„TLEæ•¸æ“š
    'base_time': '2025-09-21T04:00:00Z',  # æ™‚é–“åŸºæº–
    'metadata': {...}
}
```

### è™•ç†æµç¨‹
1. **TLEæ•¸æ“šé©—è­‰**: ç¢ºèªå¾Stage 1æ¥æ”¶çš„æ•¸æ“šå®Œæ•´æ€§
2. **SGP4è»Œé“è¨ˆç®—**: ä½¿ç”¨æ¨™æº–ç®—æ³•è¨ˆç®—è»Œé“ä½ç½®
3. **åº§æ¨™ç³»çµ±è½‰æ›**: TEMEâ†’ITRFâ†’WGS84â†’åœ°å¹³åº§æ¨™
4. **å¯è¦‹æ€§åˆ†æ**: è¨ˆç®—ä»°è§’ã€æ–¹ä½è§’ï¼Œæ‡‰ç”¨ç¯©é¸æ¢ä»¶
5. **çµæœæ•´åˆ**: çµ„ç¹”è¼¸å‡ºæ•¸æ“šæ ¼å¼

### è¼¸å‡ºæ ¼å¼
```python
stage2_output = {
    'stage': 'stage2_orbital_computing',
    'satellites': {
        'satellite_id': {
            'positions': [...],  # æ™‚é–“åºåˆ—ä½ç½®æ•¸æ“š
            'visibility_windows': [...],  # å¯è¦‹æ€§çª—å£
            'orbital_parameters': {...}  # è»Œé“åƒæ•¸
        }
    },
    'metadata': {
        'processing_time': '2025-09-21T04:05:00Z',
        'calculation_base_time': '2025-09-21T04:00:00Z',
        'total_satellites': 8837,
        'visible_satellites': 756
    }
}
```

## âš™ï¸ é…ç½®åƒæ•¸

### è»Œé“è¨ˆç®—é…ç½®
```yaml
orbital_calculation:
  algorithm: "SGP4"           # ä½¿ç”¨æ¨™æº–SGP4ç®—æ³•
  time_resolution: 30         # 30ç§’æ™‚é–“è§£æåº¦
  prediction_horizon: 24      # 24å°æ™‚é æ¸¬çª—å£
  coordinate_system: "TEME"   # åˆå§‹åº§æ¨™ç³»çµ±
```

### éˆè·¯å¯è¡Œæ€§ç¯©é¸é…ç½®
```yaml
link_feasibility_filter:
  # æ˜Ÿåº§ç‰¹å®šæœå‹™é–€æª»
  constellation_elevation_thresholds:
    starlink: 5.0             # Starlink LEOä½è»Œä½¿ç”¨5Â°
    oneweb: 10.0              # OneWeb MEOä¸­è»Œä½¿ç”¨10Â°
    other: 10.0               # å…¶ä»–è¡›æ˜Ÿé è¨­10Â°

  # éˆè·¯é ç®—ç´„æŸ
  min_distance_km: 200        # æœ€å°è·é›¢ï¼ˆé¿å…å¤šæ™®å‹’éå¤§ï¼‰
  max_distance_km: 2000       # æœ€å¤§è·é›¢ï¼ˆç¢ºä¿ä¿¡è™Ÿå¼·åº¦ï¼‰

  # è§€æ¸¬è€…ä½ç½®ï¼ˆNTPUç²¾ç¢ºåº§æ¨™ï¼‰
  observer_location:
    latitude: 24.9441         # 24Â°56'39"N
    longitude: 121.3714       # 121Â°22'17"E
    altitude_km: 0.035        # 35ç±³æµ·æ‹”
```

## ğŸ¯ æ€§èƒ½æŒ‡æ¨™

### è™•ç†æ•ˆèƒ½
- **è¼¸å…¥æ•¸æ“š**: 8,837é¡†è¡›æ˜ŸTLEæ•¸æ“š
- **è¨ˆç®—æ™‚é–“**: 2-3åˆ†é˜
- **è¨˜æ†¶é«”ä½¿ç”¨**: <1GB
- **è¼¸å‡ºæ•¸æ“š**: ç´„500-1000é¡†å¯è¦‹è¡›æ˜Ÿ

### ç²¾åº¦è¦æ±‚
- **ä½ç½®ç²¾åº¦**: <1kmèª¤å·®
- **æ™‚é–“ç²¾åº¦**: <1ç§’èª¤å·®
- **è§’åº¦ç²¾åº¦**: <0.1åº¦èª¤å·®

## ğŸ” é©—è­‰æ¨™æº–

### è¼¸å…¥é©—è­‰
- TLEæ•¸æ“šæ ¼å¼å®Œæ•´æ€§
- æ™‚é–“åŸºæº–ä¸€è‡´æ€§
- æ•¸æ“šè¡€çµ±è¿½è¹¤

### è¨ˆç®—é©—è­‰
- SGP4ç®—æ³•æ¨™æº–åˆè¦
- åº§æ¨™è½‰æ›ç²¾åº¦æª¢æŸ¥
- å¯è¦‹æ€§é‚è¼¯æ­£ç¢ºæ€§

### è¼¸å‡ºé©—è­‰
- æ•¸æ“šçµæ§‹å®Œæ•´æ€§
- å¯è¦‹è¡›æ˜Ÿæ•¸é‡åˆç†æ€§
- è™•ç†æ™‚é–“æ€§èƒ½é”æ¨™

---
**ä¸‹ä¸€è™•ç†å™¨**: [ä¿¡è™Ÿå“è³ªåˆ†æ](./stage3-signal-analysis.md)
**ç›¸é—œæ–‡æª”**: [v2.0é‡æ§‹è¨ˆåŠƒ](../refactoring_plan_v2/stage2_orbital_computing.md)