# 📊 各階段衛星數量預估值說明

⚠️ **重要提醒**: 除了最終的**10-15顆Starlink + 3-6顆OneWeb可見目標**為確定需求外，所有中間階段的衛星數量都是**預估值**，需要等程式開發完成後實際測試確認。

## 🔢 各階段預估數量與說明

### F1: TLE載入階段
| 項目 | 實際數量 | 說明 | 狀態 |
|------|----------|------|------|
| **總衛星數** | **8,736顆** | 實際載入的衛星總數 | ✅ **實測確認** |
| **Starlink** | **8,085顆** | 當前軌道上的Starlink衛星 | ✅ **實測確認** |
| **OneWeb** | **651顆** | 當前軌道上的OneWeb衛星 | ✅ **實測確認** |
| **其他星座** | **0顆** | 僅使用兩個主要星座 | ✅ **實測確認** |

**✅ Phase 1測試確認結果(2025-08-15)**:
- TLE載入成功: 8,736顆衛星，解析成功率100%
- SGP4軌道計算: 全量完成，366秒處理時間
- 星座比例: Starlink 92.5% / OneWeb 7.5%
- 數據源: NetStack本地TLE文件(2025-08-14)

### F2: 衛星篩選階段
| 項目 | 實際數量 | 說明 | 狀態 |
|------|----------|------|------|
| **總候選數** | **468顆** | NTPU觀測點相關候選衛星 | ✅ **實測確認** |
| **Starlink候選** | **350顆** | 六階段篩選後的Starlink | ✅ **實測確認** |
| **OneWeb候選** | **118顆** | 六階段篩選後的OneWeb | ✅ **實測確認** |

**✅ Phase 1測試確認結果(2025-08-15)**:
- 六階段篩選管線: 8,736 → 468顆 (篩選率94.6%)
- Starlink: 8,085 → 350顆 (保留率4.3%)
- OneWeb: 651 → 118顆 (保留率18.1%)
- 篩選處理時間: 1.45秒
- 篩選品質: 高分候選(90+分)佔多數

### F3: 信號分析階段
| 項目 | 預估數量 | 說明 | 狀態 |
|------|----------|------|------|
| **處理衛星** | ~554顆 | 承接F2輸出的候選衛星 | ⚠️ **預估值** |
| **A4事件數** | 待測試 | 鄰近衛星信號優於-100dBm事件 | ⚠️ **預估值** |
| **A5事件數** | 待測試 | 服務劣化+鄰居良好事件 | ⚠️ **預估值** |
| **D2事件數** | 待測試 | 距離優化換手事件 | ⚠️ **預估值** |

**實際數量取決於**:
- 200個時間點的完整軌道計算結果
- RSRP計算的準確性和門檻設定
- 衛星相對位置和信號強度分佈

### A1: 動態池規劃階段
| 項目 | 實際數量 | 說明 | 狀態 |
|------|----------|------|------|
| **Starlink池** | **350顆** | 模擬退火最佳化結果 | ✅ **實測確認** |
| **OneWeb池** | **118顆** | 模擬退火最佳化結果 | ✅ **實測確認** |
| **總池大小** | **468顆** | 動態覆蓋所需衛星總數 | ✅ **實測確認** |

**✅ Phase 1測試確認結果(2025-08-15)**:
- 最佳化完成: 350顆Starlink + 118顆OneWeb 
- 處理時間: 11.96秒
- ⚠️ **關鍵問題**: 可見性合規0% (需修復)
- 時空分佈: 100% (演算法收斂正常)
- 信號品質: 5.4% (需改善)

## 🎯 唯一確定的目標

### ✅ 最終可見性目標 (確定需求)
| 星座 | 可見數量 | 仰角閾值 | 狀態 |
|------|----------|----------|------|
| **Starlink** | **10-15顆** | **5°** | ✅ **確定目標** |
| **OneWeb** | **3-6顆** | **10°** | ✅ **確定目標** |

這是唯一的確定需求，所有其他數量都是為了達成此目標的中間預估值。

## 🔬 驗證方法

### Phase 1各週驗證計劃
- **Week 1**: F1實際載入衛星數量 → 確認8,735顆預估是否準確
- **Week 1**: F2實際篩選結果 → 確認554顆候選是否足夠  
- **Week 2**: F3事件分析結果 → 確認A4/A5/D2事件數量分佈
- **Week 3**: A1最佳化結果 → 確認96/38顆池大小是否達標
- **Week 4**: 完整驗證 → 確認10-15/3-6顆目標達成率

### 調整策略
如果預估值偏差較大，將採用以下調整策略：
1. **F1數量不足**: 擴大TLE數據源或降低篩選門檻
2. **F2候選太少**: 調整地理相關性評分標準
3. **F3事件稀少**: 調整RSRP門檻或距離條件
4. **A1池大小不當**: 調整模擬退火參數或約束權重

## 📊 預估精度評估

| 階段 | 預估可信度 | 主要不確定因素 |
|------|------------|----------------|
| **F1載入** | 中等 | TLE數據庫實際規模 |
| **F2篩選** | 較低 | 地理篩選標準效果 |
| **F3分析** | 較低 | 信號計算和事件觸發率 |
| **A1最佳化** | 較低 | 演算法收斂和約束平衡 |

## 🎉 結論

所有中間階段的數量都是**工程預估**，用於指導開發和設定初始參數。**只有最終的10-15/3-6顆可見性目標是確定的業務需求**，其他所有數字都將根據實際程式運行結果進行調整，確保最終目標的100%達成。

---
**更新日期**: 2025-08-15  
**版本**: v1.0  
**狀態**: 等待Phase 1各階段實際驗證