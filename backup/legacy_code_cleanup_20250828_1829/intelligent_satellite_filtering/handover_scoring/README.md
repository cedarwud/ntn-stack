# 換手適用性評分系統

> **依據**：[@docs/satellite_data_preprocessing.md](../../docs/satellite_data_preprocessing.md) 階段 2.3 換手適用性評分

## 🎯 評分原理

**核心目標**：基於星座特性和換手需求進行動態評分，選擇最適合換手場景的衛星

### 📊 星座特定評分邏輯

#### Starlink 專用評分 (總分 100 分)
```python
starlink_scoring = {
    "軌道傾角適用性": 30分,  # 針對 53° 傾角優化
    "高度適用性": 25分,      # 550km 最佳高度
    "相位分散度": 20分,      # 避免同步出現/消失
    "換手頻率": 15分,        # 適中的切換頻率
    "信號穩定性": 10分       # 軌道穩定性評估
}
```

#### OneWeb 專用評分 (總分 100 分)  
```python
oneweb_scoring = {
    "軌道傾角適用性": 25分,  # 針對 87° 傾角優化
    "高度適用性": 25分,      # 1200km 最佳
    "極地覆蓋": 20分,        # 高傾角優勢
    "軌道形狀": 20分,        # 近圓軌道
    "相位分散": 10分         # 避免同步出現
}
```

## 🔧 評分標準詳細

### Starlink 評分標準

**軌道傾角適用性** (30分)：
- 53° ± 2°：100分 (最佳傾角)
- 53° ± 5°：85分 (良好傾角)  
- 53° ± 10°：70分 (可接受傾角)
- 偏離更大：50分-偏差×2

**高度適用性** (25分)：
- 550km ± 50km：100分 (最佳高度)
- 550km ± 100km：80分 (良好高度)
- 550km ± 200km：60分 (可接受高度)

### OneWeb 評分標準

**軌道傾角適用性** (25分)：
- ≥85°：100分 (極地軌道)
- ≥80°：80分 (高傾角軌道)
- ≥70°：60分 (中高傾角軌道)
- <70°：30分 (低傾角軌道)

**極地覆蓋** (20分)：
- ≥85°：100分 (極地覆蓋優勢)
- ≥70°：80分 (高緯覆蓋)
- ≥50°：60分 (中緯覆蓋)
- <50°：20分 (低緯覆蓋)

## 🚀 核心功能

### HandoverScorer 類

- `apply_handover_scoring()`: 應用換手適用性評分
- `select_top_satellites()`: 基於評分選擇頂級衛星
- `get_scoring_statistics()`: 獲取評分統計信息

### 評分流程

```python
1. 星座特定評分計算
   ├── Starlink: 針對53°/550km優化
   └── OneWeb: 針對87°/1200km優化

2. 多維度綜合評估  
   ├── 軌道參數適用性
   ├── 換手頻率合理性
   ├── 信號穩定性預測
   └── 相位分散均勻性

3. 排序和篩選
   ├── 按評分降序排列
   └── 選擇頂級衛星子集
```

## 📊 預期效果

**評分結果**：每顆衛星獲得 0-100 分的換手適用性評分

```
評分分佈:
├── 90-100分: 頂級換手候選 (優先選擇)
├── 80-89分: 優秀換手候選 (次優選擇)
├── 70-79分: 良好換手候選 (備選)
└── <70分: 一般候選 (最後選擇)
```

## 🎯 使用範例

```python
from handover_scorer import HandoverScorer

scorer = HandoverScorer()

# 應用評分
scored_data = scorer.apply_handover_scoring(geo_filtered_data)

# 選擇頂級衛星
selection_config = {"starlink": 555, "oneweb": 134}
selected = scorer.select_top_satellites(scored_data, selection_config)

# 獲取統計
stats = scorer.get_scoring_statistics(scored_data)
```

## 📈 智能選擇策略

**選擇原則**：
- **評分優先**：優先選擇高評分衛星
- **均勻分佈**：避免時間聚集和空隙
- **星座平衡**：保持星座間的合理比例
- **動態調整**：基於實際需求調整選擇標準

---

**智能評分：基於星座特性的換手優化選擇**