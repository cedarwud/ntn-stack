# ğŸ›°ï¸ éšæ®µå…­ï¼šå‹•æ…‹è¡›æ˜Ÿæ± è¦åŠƒ

[ğŸ”„ è¿”å›æ•¸æ“šæµç¨‹å°èˆª](../README.md) > éšæ®µå…­

## ğŸ“– éšæ®µæ¦‚è¿°

**è¨­è¨ˆç›®æ¨™**ï¼šå»ºç«‹æ™ºèƒ½å‹•æ…‹è¡›æ˜Ÿæ± ï¼Œç¢ºä¿ NTPU è§€æ¸¬é»ä¸Šç©ºä»»ä½•æ™‚åˆ»éƒ½æœ‰è¶³å¤ çš„å¯è¦‹è¡›æ˜Ÿï¼Œæ”¯æ´é€£çºŒä¸é–“æ–·çš„è¡›æ˜Ÿåˆ‡æ›ç ”ç©¶

### ğŸ¯ æ ¸å¿ƒç›®æ¨™
- **Starlink æŒçºŒè¦†è“‹**ï¼šä»»ä½•æ™‚åˆ»ä¿è­‰ 10-15 é¡†å¯è¦‹è¡›æ˜Ÿï¼ˆä»°è§’ â‰¥10Â°ï¼‰
- **OneWeb æŒçºŒè¦†è“‹**ï¼šä»»ä½•æ™‚åˆ»ä¿è­‰ 3-6 é¡†å¯è¦‹è¡›æ˜Ÿï¼ˆä»°è§’ â‰¥10Â°ï¼‰
- **æ™‚é–“è¦†è“‹ç‡**ï¼šâ‰¥95% æ™‚é–“æ»¿è¶³ä¸Šè¿°è¦†è“‹è¦æ±‚ï¼ˆå…è¨±çŸ­æš«ç·©è¡ï¼‰
- **åˆ‡æ›é€£çºŒæ€§**ï¼šç¢ºä¿è¡›æ˜Ÿåˆ‡æ›æ™‚è‡³å°‘æœ‰ 3 å€‹å€™é¸è¡›æ˜Ÿå¯ç”¨

### ğŸ“Š é æœŸè¼¸å‡ºï¼ˆæ™ºèƒ½å„ªåŒ–ç‰ˆï¼‰
**è¡›æ˜Ÿæ± è¦æ¨¡**ï¼šæ™ºèƒ½è»Œé“ç›¸ä½é¸æ“‡æœ€å„ªå­é›†ï¼ˆé ä¼° 150-250 é¡†ï¼‰
  - Starlink: ç´„ 100-200 é¡†ï¼ˆ1.2-2.4% é«˜æ•ˆå­é›†ï¼‰
  - OneWeb: ç´„ 30-50 é¡†ï¼ˆ4.6-7.7% ç²¾é¸å­é›†ï¼‰
**æ ¸å¿ƒç­–ç•¥**ï¼šè»Œé“ç›¸ä½éŒ¯é–‹ + æ™‚ç©ºäº’è£œè¦†è“‹ï¼ˆéæš´åŠ›æ•¸é‡å †ç–Šï¼‰
**æ™‚é–“åºåˆ—**ï¼šå®Œæ•´è»Œé“é€±æœŸæ•¸æ“šï¼ˆ2å°æ™‚é©—è­‰çª—å£ï¼‰
**è¦†è“‹ä¿è­‰**ï¼š95%+ æ™‚æ®µæ»¿è¶³è¦†è“‹è¦æ±‚ï¼ŒåŸºæ–¼è»Œé“å‹•åŠ›å­¸æœ€å„ªåŒ–
**è™•ç†æ™‚é–“**ï¼š< 3 ç§’

## ğŸ¯ æ¼”ç®—æ³•è¨­è¨ˆè¦æ±‚

### æ™ºèƒ½è»Œé“ç›¸ä½é¸æ“‡ç­–ç•¥ï¼ˆé©—è­‰å„ªåŒ–ç‰ˆï¼‰
- **è»Œé“é€±æœŸé©—è­‰**ï¼šåŸºæ–¼2å°æ™‚å®Œæ•´è»Œé“é€±æœŸï¼ˆStarlink 93.63min, OneWeb 109.64minï¼‰
- **æ™‚ç©ºéŒ¯ç½®æ ¸å¿ƒç®—æ³•**ï¼šé¸æ“‡è»Œé“ç›¸ä½äº’è£œçš„è¡›æ˜Ÿï¼Œå¯¦ç¾é€£çºŒè¦†è“‹
- **æœ€å°è¡›æ˜Ÿæ•¸åŸç†**ï¼šç†è«–æœ€å°å€¼3-4é¡†Ã—å®‰å…¨ä¿‚æ•¸2-3 = å¯¦éš›éœ€æ±‚50-100é¡†
- **å¯è¦‹æ€§æ™ºèƒ½é ç¯©é¸**ï¼šæ’é™¤NTPUåº§æ¨™æ°¸ä¸å¯è¦‹çš„è¡›æ˜Ÿï¼ˆæ¸›å°‘75-85%å€™é¸ï¼‰
- **è»Œé“å¹³é¢åˆ†æ•£ç­–ç•¥**ï¼šä¸åŒè»Œé“å‚¾è§’å’Œå‡äº¤é»çš„æœ€å„ªçµ„åˆ
- **è¦†è“‹é–“éš™é›¶å®¹å¿**ï¼šé€šéç²¾ç¢ºè»Œé“è¨ˆç®—ç¢ºä¿ç„¡è¦†è“‹ç©ºçª—
- **å‹•æ…‹ç·©è¡æ©Ÿåˆ¶**ï¼šé ç•™10-20%é¡å¤–è¡›æ˜Ÿæ‡‰å°è»Œé“æ”å‹•

### è¦†è“‹é©—è­‰æŒ‡æ¨™ï¼ˆåŸºæ–¼è»Œé“é€±æœŸé©—è­‰ï¼‰
- **è»Œé“é€±æœŸå®Œæ•´æ€§**ï¼š2å°æ™‚æ™‚é–“çª—å£è¦†è“‹å®Œæ•´è»Œé“é€±æœŸ
- **æ™‚ç©ºéŒ¯ç½®æœ‰æ•ˆæ€§**ï¼šé©—è­‰ä¸åŒè»Œé“ç›¸ä½è¡›æ˜Ÿçš„æ¥çºŒè¦†è“‹
- **æœ€å°å¯è¦‹è¡›æ˜Ÿæ•¸**ï¼šåŸºæ–¼è»Œé“å‹•åŠ›å­¸çš„ç†è«–æœ€å°å€¼é©—è­‰
- **è¦†è“‹é€£çºŒæ€§æŒ‡æ¨™**ï¼šå®Œæ•´è»Œé“é€±æœŸå…§çš„ç„¡ä¸­æ–·æ™‚é–“ç™¾åˆ†æ¯”
- **è»Œé“ç›¸ä½å„ªåŒ–æ•ˆæœ**ï¼šç›¸æ¯”æš´åŠ›æ•¸é‡å †ç–Šçš„æ•ˆç‡æå‡
- **æœå‹™è³ªé‡ä¿è­‰**ï¼šåœ¨æœ€å°è¡›æ˜Ÿæ•¸ç´„æŸä¸‹çš„RSRPã€RSRQé–€æª»é”æˆç‡

## ğŸ› ï¸ æŠ€è¡“å¯¦ç¾è¦æ±‚

### æ™‚é–“åºåˆ—æ•¸æ“šå®Œæ•´æ€§
ç¢ºä¿é¸ä¸­çš„æ¯é¡†è¡›æ˜Ÿéƒ½åŒ…å«å®Œæ•´çš„è»Œé“æ™‚é–“åºåˆ—æ•¸æ“šï¼š

```python
@dataclass 
class EnhancedSatelliteCandidate:
    """å¢å¼·è¡›æ˜Ÿå€™é¸è³‡è¨Š + åŒ…å«æ™‚é–“åºåˆ—è»Œé“æ•¸æ“š"""
    basic_info: SatelliteBasicInfo
    windows: List[SAVisibilityWindow]
    total_visible_time: int
    coverage_ratio: float
    distribution_score: float
    signal_metrics: SignalCharacteristics
    selection_rationale: Dict[str, float]
    # ğŸ¯ é—œéµä¿®å¾©ï¼šæ·»åŠ æ™‚é–“åºåˆ—è»Œé“æ•¸æ“šæ”¯æŒ
    position_timeseries: List[Dict[str, Any]] = None
```

### æ•¸æ“šå®Œæ•´æ€§ä¿è­‰
æ¯é¡†é¸ä¸­çš„è¡›æ˜ŸåŒ…å«ï¼š
- **æ™‚é–“é»æ•¸**ï¼šStarlink 192å€‹é» (96åˆ†é˜)ã€OneWeb 218å€‹é» (109åˆ†é˜)
- **è»Œé“è¦†è“‹**ï¼šå®Œæ•´è»Œé“é€±æœŸçš„ä½ç½®ä¿¡æ¯ï¼Œ30ç§’é–“éš”é€£çºŒæ•¸æ“š
- **SGP4ç²¾åº¦**ï¼šçœŸå¯¦è»Œé“å‹•åŠ›å­¸è¨ˆç®—çµæœ
- **é€£çºŒæ€§ä¿è­‰**ï¼šç„¡æ•¸æ“šé–“éš™ï¼Œæ”¯æŒå¹³æ»‘å‹•ç•«

## ğŸ› ï¸ å¯¦ç¾æ¶æ§‹

### ä¸»è¦åŠŸèƒ½æ¨¡çµ„
```bash
/netstack/src/stages/enhanced_dynamic_pool_planner.py
â”œâ”€â”€ convert_to_enhanced_candidates()      # ä¿ç•™æ™‚é–“åºåˆ—æ•¸æ“š
â”œâ”€â”€ generate_enhanced_output()            # è¼¸å‡ºå«æ™‚é–“åºåˆ—çš„è¡›æ˜Ÿæ± 
â””â”€â”€ process()                            # å®Œæ•´æµç¨‹åŸ·è¡Œ

/netstack/netstack_api/routers/simple_satellite_router.py
â”œâ”€â”€ get_dynamic_pool_satellite_data()    # å„ªå…ˆè®€å–éšæ®µå…­æ•¸æ“š
â””â”€â”€ get_precomputed_satellite_data()     # æ•¸æ“šæºå„ªå…ˆç´šæ§åˆ¶
```

### é—œéµä¿®å¾©å¯¦ç¾
```python
def convert_to_enhanced_candidates(self, satellite_data: List[Dict]):
    """è½‰æ›å€™é¸æ•¸æ“šä¸¦ä¿ç•™å®Œæ•´æ™‚é–“åºåˆ—"""
    enhanced_candidates = []
    
    for sat_data in satellite_data:
        # ğŸ¯ é—œéµä¿®å¾©ï¼šä¿ç•™å®Œæ•´çš„æ™‚é–“åºåˆ—æ•¸æ“š
        position_timeseries = sat_data.get('position_timeseries', [])
        
        candidate = EnhancedSatelliteCandidate(
            basic_info=basic_info,
            windows=windows,
            # ... å…¶ä»–å­—æ®µ ...
            # ğŸ¯ é—œéµä¿®å¾©ï¼šæ·»åŠ æ™‚é–“åºåˆ—æ•¸æ“šåˆ°å€™é¸å°è±¡
            position_timeseries=position_timeseries
        )
        enhanced_candidates.append(candidate)
    
    return enhanced_candidates

def generate_enhanced_output(self, results: Dict) -> Dict:
    """ç”ŸæˆåŒ…å«æ™‚é–“åºåˆ—çš„æœ€çµ‚è¼¸å‡º"""
    output_data = {
        'dynamic_satellite_pool': {
            'starlink_satellites': [],
            'oneweb_satellites': [],
            'selection_details': []
        }
    }
    
    for sat_id, candidate in results['selected_satellites'].items():
        sat_info = {
            'satellite_id': sat_id,
            'constellation': candidate.basic_info.constellation.value,
            'satellite_name': candidate.basic_info.satellite_name,
            'norad_id': candidate.basic_info.norad_id,
            # ... å…¶ä»–ä¿¡æ¯ ...
            # ğŸ¯ é—œéµä¿®å¾©ï¼šä¿ç•™å®Œæ•´çš„æ™‚é–“åºåˆ—è»Œé“æ•¸æ“š
            'position_timeseries': candidate.position_timeseries or []
        }
        output_data['dynamic_satellite_pool']['selection_details'].append(sat_info)
    
    return output_data
```

## ğŸ“Š è¼¸å‡ºæ•¸æ“šæ ¼å¼

### éšæ®µå…­è¼¸å‡ºçµæ§‹
```json
{
  "optimization_metadata": {
    "timestamp": "2025-08-18T12:00:00Z",
    "stage": "stage6_dynamic_pool_planning",
    "processing_time_seconds": 0.5,
    "observer_location": {
      "latitude": 24.9441667,
      "longitude": 121.3713889,
      "location_name": "NTPU"
    }
  },
  "dynamic_satellite_pool": {
    "starlink_satellites": ["STARLINK-1234", "..."],  // 100-200é¡†ï¼ˆæ™ºèƒ½é¸æ“‡ï¼‰
    "oneweb_satellites": ["ONEWEB-0123", "..."],      // 30-50é¡†ï¼ˆè»Œé“ç›¸ä½å„ªåŒ–ï¼‰
    "total_count": 150,  // ç›¸æ¯”850+150æ¸›å°‘85%
    "selection_details": [
      {
        "satellite_id": "STARLINK-1234",
        "constellation": "starlink",
        "satellite_name": "Starlink-1234",
        "norad_id": 12345,
        "total_visible_time": 1800,
        "coverage_ratio": 0.75,
        "distribution_score": 0.85,
        "signal_metrics": {
          "rsrp_dbm": -85.5,
          "rsrq_db": 12.8,
          "sinr_db": 15.2
        },
        "visibility_windows": 3,
        "selection_rationale": {
          "visibility_score": 0.9,
          "signal_score": 0.8,
          "temporal_score": 0.85
        },
        // ğŸ¯ é—œéµï¼šæ¯é¡†è¡›æ˜ŸåŒ…å«å®Œæ•´çš„192é»æ™‚é–“åºåˆ—æ•¸æ“š
        "position_timeseries": [
          {
            "time": "2025-08-18T00:00:00Z",
            "time_offset_seconds": 0,
            "position_eci": {"x": 1234.5, "y": 5678.9, "z": 3456.7},
            "velocity_eci": {"x": 7.5, "y": -2.3, "z": 1.8},
            "range_km": 1250.3,
            "elevation_deg": 15.2,
            "azimuth_deg": 45.8,
            "is_visible": true
          },
          // ... 191 more points at 30-second intervals
        ]
      }
    ]
  }
}
```

## ğŸ”„ API æ•´åˆ

### NetStack API æ•¸æ“šæºå„ªå…ˆç´š
```python
def get_precomputed_satellite_data(constellation: str, count: int = 200) -> List[Dict]:
    """
    ç²å–é è¨ˆç®—è¡›æ˜Ÿæ•¸æ“šï¼Œå„ªå…ˆä½¿ç”¨éšæ®µå…­å‹•æ…‹æ± æ•¸æ“š
    éšæ®µå…­(156é¡†å„ªåŒ–) > éšæ®µäº”åˆ†å±¤æ•¸æ“š(150+50é¡†) > éŒ¯èª¤
    """
    
    # ğŸ¯ å„ªå…ˆå˜—è©¦éšæ®µå…­å‹•æ…‹æ± æ•¸æ“š
    try:
        dynamic_pool_satellites = get_dynamic_pool_satellite_data(constellation, count)
        if dynamic_pool_satellites:
            logger.info(f"âœ… ä½¿ç”¨éšæ®µå…­å‹•æ…‹æ± æ•¸æ“š: {len(dynamic_pool_satellites)} é¡† {constellation} è¡›æ˜Ÿ")
            return dynamic_pool_satellites
    except Exception as e:
        logger.warning(f"âš ï¸ éšæ®µå…­å‹•æ…‹æ± æ•¸æ“šè¼‰å…¥å¤±æ•—ï¼Œå›é€€åˆ°éšæ®µäº”: {e}")
    
    # ğŸ”„ å›é€€åˆ°éšæ®µäº”åˆ†å±¤æ•¸æ“š
    return get_layered_satellite_data(constellation, count)
```

## ğŸ“ˆ æˆåŠŸæ¨™æº–ï¼ˆèª¿æ•´å¾Œï¼‰

### å¿…é ˆé”æˆçš„æŒ‡æ¨™
1. **è¦†è“‹ç‡ â‰¥ 95%**ï¼š95%ä»¥ä¸Šæ™‚é–“æ»¿è¶³æœ€å°è¡›æ˜Ÿæ•¸è¦æ±‚ï¼ˆèª¿æ•´ï¼‰
2. **æœ€å¤§é–“éš™ < 2åˆ†é˜**ï¼šä»»ä½•è¦†è“‹é–“éš™ä¸è¶…é 2 åˆ†é˜ï¼ˆèª¿æ•´ï¼‰
3. **åˆ‡æ›é€£çºŒæ€§**ï¼šä»»ä½•åˆ‡æ›æ™‚åˆ»è‡³å°‘æœ‰3å€‹å€™é¸è¡›æ˜Ÿ
4. **æ•¸æ“šå®Œæ•´æ€§**ï¼šæ¯é¡†è¡›æ˜ŸåŒ…å«å®Œæ•´è»Œé“é€±æœŸæ•¸æ“š
5. **å­é›†å„ªåŒ–**ï¼šStarlink â‰¤ 900é¡†ã€OneWeb â‰¤ 160é¡†ï¼ˆæ–°å¢ï¼‰

### æ€§èƒ½è¦æ±‚
- **è™•ç†æ™‚é–“**ï¼š< 5ç§’å®Œæˆå‹•æ…‹æ± è¦åŠƒ
- **è¨˜æ†¶é«”ä½¿ç”¨**ï¼š< 2GB å³°å€¼è¨˜æ†¶é«”
- **API éŸ¿æ‡‰**ï¼š< 100ms æŸ¥è©¢éŸ¿æ‡‰æ™‚é–“
- **å‰ç«¯æµæš¢**ï¼š60 FPS è»Œè·¡å‹•ç•«ç„¡å¡é “

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ
1. **æ™‚é–“åºåˆ—æ•¸æ“šç‚ºç©º**
   - æª¢æŸ¥ï¼šéšæ®µäº”æ˜¯å¦æ­£ç¢ºç”Ÿæˆæ•¸æ“š
   - è§£æ±ºï¼šç¢ºèª `position_timeseries` å­—æ®µå­˜åœ¨

2. **APIè¿”å›èˆŠæ•¸æ“š**
   - æª¢æŸ¥ï¼šéšæ®µå…­æ–‡ä»¶æ˜¯å¦ç”Ÿæˆ
   - è§£æ±ºï¼šé‡æ–°åŸ·è¡Œéšæ®µå…­è™•ç†æµç¨‹

3. **å‰ç«¯è»Œè·¡ä»ç„¶è·³èº**
   - æª¢æŸ¥ï¼šAPIæ˜¯å¦ä½¿ç”¨éšæ®µå…­æ•¸æ“š
   - è§£æ±ºï¼šç¢ºèª NetStack API æ—¥èªŒä¸­é¡¯ç¤ºä½¿ç”¨éšæ®µå…­æ•¸æ“š

## ğŸ“Š é æœŸæˆæœ

### å° LEO è¡›æ˜Ÿåˆ‡æ›ç ”ç©¶çš„åƒ¹å€¼
1. **é€£çºŒåˆ‡æ›å ´æ™¯**ï¼šæä¾›çœŸå¯¦çš„é€£çºŒåˆ‡æ›æ¸¬è©¦ç’°å¢ƒ
2. **æ¼”ç®—æ³•é©—è­‰**ï¼šå¯é©—è­‰å„ç¨®åˆ‡æ›æ±ºç­–æ¼”ç®—æ³•çš„æ•ˆèƒ½
3. **QoS ä¿è­‰**ï¼šç¢ºä¿æœå‹™å“è³ªåœ¨åˆ‡æ›éç¨‹ä¸­çš„é€£çºŒæ€§
4. **çµ±è¨ˆåˆ†æ**ï¼šæä¾›å……è¶³çš„æ¨£æœ¬æ•¸æ“šé€²è¡Œçµ±è¨ˆç ”ç©¶

### ç³»çµ±æ•´åˆæ•ˆç›Š
1. **å‰ç«¯è¦–è¦ºåŒ–**ï¼šæ”¯æ´æµæš¢çš„ 3D è¡›æ˜Ÿè»Œè·¡å‹•ç•«
2. **API æ•ˆèƒ½**ï¼šé è¨ˆç®—æ•¸æ“šå¤§å¹…é™ä½å³æ™‚é‹ç®—è² è¼‰
3. **ç ”ç©¶å½ˆæ€§**ï¼šæ”¯æ´ä¸åŒæ™‚é–“æ®µçš„åˆ‡æ›å ´æ™¯æ¨¡æ“¬
4. **æ•¸æ“šå¯é æ€§**ï¼šåŸºæ–¼çœŸå¯¦ TLE æ•¸æ“šçš„æº–ç¢ºè»Œé“é æ¸¬

## âœ… éšæ®µé©—è­‰æ¨™æº–

### ğŸ¯ Stage 6 å®Œæˆé©—è­‰æª¢æŸ¥æ¸…å–®

#### 1. **è¼¸å…¥é©—è­‰**
- [ ] Stage 5æ•´åˆæ•¸æ“šå®Œæ•´
  - æ¥æ”¶1,100+é¡†å€™é¸è¡›æ˜Ÿ
  - åŒ…å«å®Œæ•´æ™‚é–“åºåˆ—æ•¸æ“š
  - ä¿¡è™ŸæŒ‡æ¨™å’Œå¯è¦‹æ€§çª—å£æ­£ç¢º

#### 2. **æ™‚ç©ºéŒ¯ç½®é©—è­‰**
- [ ] **è»Œé“ç›¸ä½åˆ†æ•£**
  ```
  é©—è­‰é …ç›®:
  - å¹³å‡è¿‘é»è§’åˆ†æ•£: 12å€‹ç›¸ä½å€é–“
  - RAANåˆ†æ•£: 8å€‹å€é–“
  - ç›¸ä½å¤šæ¨£æ€§å¾—åˆ† > 0.7
  ```
- [ ] **æ™‚é–“è¦†è“‹é€£çºŒæ€§**
  - Starlink: ä»»ä½•æ™‚åˆ»10-15é¡†å¯è¦‹ï¼ˆ5åº¦ä»°è§’ï¼‰
  - OneWeb: ä»»ä½•æ™‚åˆ»3-6é¡†å¯è¦‹ï¼ˆ10åº¦ä»°è§’ï¼‰
  - è¦†è“‹ç‡ â‰¥ 95%

#### 3. **è¡›æ˜Ÿæ± è¦æ¨¡é©—è­‰**
- [ ] **æœ€çµ‚æ± å¤§å°**
  ```
  ç›®æ¨™ç¯„åœ:
  - Starlink: 200-250é¡†
  - OneWeb: 60-80é¡†
  - ç¸½è¨ˆ: 260-330é¡†
  ```
- [ ] **é¸æ“‡å“è³ª**
  - å„ªå…ˆé¸æ“‡é«˜ä»°è§’è¡›æ˜Ÿ
  - ä¿¡è™Ÿå“è³ªRSRP > -100 dBm
  - å¯è¦‹æ™‚é–“é•·çš„è¡›æ˜Ÿå„ªå…ˆ

#### 4. **è»Œé“é€±æœŸé©—è­‰**
- [ ] **å®Œæ•´é€±æœŸè¦†è“‹**
  - Starlink: 93.63åˆ†é˜å®Œæ•´é©—è­‰
  - OneWeb: 109.64åˆ†é˜å®Œæ•´é©—è­‰
  - æœ€å¤§è¦†è“‹ç©ºéš™ < 2åˆ†é˜
- [ ] **åˆ‡æ›é€£çºŒæ€§**
  - ä»»ä½•åˆ‡æ›æ™‚åˆ»è‡³å°‘3å€‹å€™é¸
  - åˆ‡æ›æˆåŠŸç‡ > 95%

#### 5. **è¼¸å‡ºé©—è­‰**
- [ ] **æ•¸æ“šçµæ§‹å®Œæ•´æ€§**
  ```json
  {
    "metadata": {
      "stage": "stage6_dynamic_pool",
      "algorithm": "spatiotemporal_diversity",
      "processing_time_seconds": 2.5
    },
    "dynamic_satellite_pool": {
      "starlink_satellites": [...],  // 200-250é¡†
      "oneweb_satellites": [...],    // 60-80é¡†
      "selection_details": [
        {
          "satellite_id": "...",
          "position_timeseries": [...],  // 192é»å®Œæ•´è»Œè·¡
          "selection_rationale": {...}
        }
      ]
    },
    "coverage_validation": {
      "starlink_coverage_ratio": 0.96,
      "oneweb_coverage_ratio": 0.95,
      "phase_diversity_score": 0.75
    }
  }
  ```
- [ ] **æ™‚é–“åºåˆ—ä¿ç•™**
  - æ¯é¡†è¡›æ˜Ÿ192å€‹æ™‚é–“é»
  - ç„¡æ•¸æ“šç¼ºå¤±æˆ–è·³èº
  - æ”¯æ´å‰ç«¯å¹³æ»‘å‹•ç•«

#### 6. **æ€§èƒ½æŒ‡æ¨™**
- [ ] è™•ç†æ™‚é–“ < 5ç§’
- [ ] è¨˜æ†¶é«”ä½¿ç”¨ < 2GB
- [ ] APIéŸ¿æ‡‰ < 100ms

#### 7. **è‡ªå‹•é©—è­‰è…³æœ¬**
```python
# åŸ·è¡Œéšæ®µé©—è­‰
python -c "
import json
import numpy as np

# è¼‰å…¥å‹•æ…‹æ± è¼¸å‡º
try:
    with open('/app/data/dynamic_pool_planning_outputs/enhanced_dynamic_pools_output.json', 'r') as f:
        data = json.load(f)
except:
    print('âš ï¸ éšæ®µå…­è¼¸å‡ºä¸å­˜åœ¨')
    exit(1)

pool = data.get('dynamic_satellite_pool', {})
validation = data.get('coverage_validation', {})

starlink_count = len(pool.get('starlink_satellites', []))
oneweb_count = len(pool.get('oneweb_satellites', []))

# æª¢æŸ¥æ™‚é–“åºåˆ—å®Œæ•´æ€§
has_timeseries = True
for sat in pool.get('selection_details', [])[:10]:  # æª¢æŸ¥å‰10é¡†
    if len(sat.get('position_timeseries', [])) < 192:
        has_timeseries = False
        break

checks = {
    'starlink_pool_size': 200 <= starlink_count <= 250,
    'oneweb_pool_size': 60 <= oneweb_count <= 80,
    'total_pool_size': 260 <= (starlink_count + oneweb_count) <= 330,
    'starlink_coverage': validation.get('starlink_coverage_ratio', 0) >= 0.95,
    'oneweb_coverage': validation.get('oneweb_coverage_ratio', 0) >= 0.95,
    'phase_diversity': validation.get('phase_diversity_score', 0) >= 0.70,
    'has_timeseries': has_timeseries
}

passed = sum(checks.values())
total = len(checks)

print('ğŸ“Š Stage 6 é©—è­‰çµæœ:')
print(f'  Starlinkæ± : {starlink_count} é¡†')
print(f'  OneWebæ± : {oneweb_count} é¡†')
print(f'  Starlinkè¦†è“‹ç‡: {validation.get(\"starlink_coverage_ratio\", 0):.1%}')
print(f'  OneWebè¦†è“‹ç‡: {validation.get(\"oneweb_coverage_ratio\", 0):.1%}')
print(f'  ç›¸ä½å¤šæ¨£æ€§: {validation.get(\"phase_diversity_score\", 0):.2f}')

print('\\né©—è­‰é …ç›®:')
for check, result in checks.items():
    print(f'  {\"âœ…\" if result else \"âŒ\"} {check}')

if passed == total:
    print('\\nâœ… Stage 6 é©—è­‰é€šéï¼')
    print('ğŸ‰ å…­éšæ®µè³‡æ–™é è™•ç†å…¨éƒ¨å®Œæˆï¼')
    print('âœ… Starlink: éš¨æ™‚ä¿æŒ10-15é¡†å¯è¦‹ï¼ˆ5åº¦ä»°è§’ï¼‰')
    print('âœ… OneWeb: éš¨æ™‚ä¿æŒ3-6é¡†å¯è¦‹ï¼ˆ10åº¦ä»°è§’ï¼‰')
    print('âœ… æ™‚ç©ºéŒ¯ç½®ç­–ç•¥æˆåŠŸå¯¦ç¾ï¼')
else:
    print(f'\\nâŒ Stage 6 é©—è­‰å¤±æ•— ({passed}/{total})')
    exit(1)
"
```

### ğŸš¨ é©—è­‰å¤±æ•—è™•ç†
1. **è¡›æ˜Ÿæ± éå°**: å¢åŠ å€™é¸è¡›æ˜Ÿæ•¸é‡ã€æ”¾å¯¬ç¯©é¸æ¢ä»¶
2. **è¦†è“‹ä¸è¶³**: èª¿æ•´æ™‚ç©ºéŒ¯ç½®åƒæ•¸ã€å¢åŠ è»Œé“ç›¸ä½åˆ†æ•£
3. **æ™‚é–“åºåˆ—ç¼ºå¤±**: ç¢ºèªStage 5æ•¸æ“šå®Œæ•´æ€§
4. **ç›¸ä½å¤šæ¨£æ€§ä¸è¶³**: å„ªåŒ–é¸æ“‡ç®—æ³•ã€å¢åŠ RAANåˆ†æ•£

### ğŸ“Š é—œéµæŒ‡æ¨™
- **æ™‚ç©ºéŒ¯ç½®**: è»Œé“ç›¸ä½å‡å‹»åˆ†æ•£
- **è¦†è“‹é€£çºŒ**: 95%+æ™‚é–“æ»¿è¶³è¦æ±‚
- **åˆ‡æ›ä¿è­‰**: ä»»ä½•æ™‚åˆ»æœ‰å……è¶³å€™é¸

### ğŸ¯ æœ€çµ‚é©—è­‰
åŸ·è¡Œå®ŒStage 6é©—è­‰å¾Œï¼Œç³»çµ±æ‡‰é”åˆ°ï¼š
- âœ… **Starlink**: ä»»ä½•æ™‚åˆ»10-15é¡†å¯è¦‹ï¼ˆ5åº¦ä»°è§’é–¾å€¼ï¼‰
- âœ… **OneWeb**: ä»»ä½•æ™‚åˆ»3-6é¡†å¯è¦‹ï¼ˆ10åº¦ä»°è§’é–¾å€¼ï¼‰
- âœ… **å®Œæ•´è»Œé“é€±æœŸ**: ç„¡è¦†è“‹ç©ºéš™
- âœ… **æ™‚ç©ºéŒ¯ç½®**: è¡›æ˜Ÿåœ¨æ™‚é–“å’Œç©ºé–“ä¸ŠéŒ¯é–‹åˆ†ä½ˆ

## ğŸ–¥ï¸ å‰ç«¯ç°¡åŒ–ç‰ˆé©—è­‰å‘ˆç¾

### é©—è­‰å¿«ç…§ä½ç½®
```bash
# é©—è­‰çµæœå¿«ç…§ (è¼•é‡ç´šï¼Œä¾›å‰ç«¯è®€å–)
/app/data/validation_snapshots/stage6_validation.json

# å‹•æ…‹æ± è¼¸å‡ºæª”æ¡ˆ
/app/data/dynamic_pool_planning_outputs/
â”œâ”€â”€ enhanced_dynamic_pools_output.json    # å®Œæ•´å‹•æ…‹æ±  (~35MB)
â”œâ”€â”€ starlink_pool.json                   # Starlinkå­é›† (~25MB)
â””â”€â”€ oneweb_pool.json                     # OneWebå­é›† (~10MB)
```

### JSON æ ¼å¼ç¯„ä¾‹
```json
{
  "stage": 6,
  "stageName": "å‹•æ…‹è¡›æ˜Ÿæ± è¦åŠƒ",
  "timestamp": "2025-08-14T08:15:00Z",
  "status": "completed",
  "duration_seconds": 180,
  "keyMetrics": {
    "Starlinkæ± ": 225,
    "OneWebæ± ": 70,
    "ç¸½è¡›æ˜Ÿæ± ": 295,
    "è¦†è“‹é€£çºŒæ€§": "100%",
    "æ™‚ç©ºåˆ†é›¢åº¦": "å„ªç§€"
  },
  "spatiotemporalMetrics": {
    "starlink": {
      "poolSize": 225,
      "orbitalPeriod": "93.63åˆ†é˜",
      "phaseDistribution": "å‡å‹»",
      "minVisible": 10,
      "maxVisible": 15,
      "avgVisible": 12.5,
      "coverageGaps": 0
    },
    "oneweb": {
      "poolSize": 70,
      "orbitalPeriod": "109.64åˆ†é˜",
      "phaseDistribution": "å‡å‹»",
      "minVisible": 3,
      "maxVisible": 6,
      "avgVisible": 4.5,
      "coverageGaps": 0
    }
  },
  "validation": {
    "passed": true,
    "totalChecks": 10,
    "passedChecks": 10,
    "failedChecks": 0,
    "criticalChecks": [
      {"name": "æ™‚ç©ºéŒ¯ç½®", "status": "passed", "score": "95/100"},
      {"name": "è¦†è“‹é€£çºŒ", "status": "passed", "gaps": "0"},
      {"name": "æ± å¤§å°", "status": "passed", "starlink": "225", "oneweb": "70"}
    ]
  },
  "coverageAnalysis": {
    "timeWindows": 192,
    "fullCoverageWindows": 192,
    "partialCoverageWindows": 0,
    "noCoverageWindows": 0,
    "coveragePercentage": "100%"
  },
  "performanceMetrics": {
    "processingTime": "3åˆ†é˜",
    "memoryUsage": "350MB",
    "outputMode": "æª”æ¡ˆè¼¸å‡º"
  },
  "finalValidation": {
    "ready": true,
    "starlinkRequirement": "âœ… 10-15é¡†æŒçºŒå¯è¦‹",
    "onewebRequirement": "âœ… 3-6é¡†æŒçºŒå¯è¦‹",
    "spatiotemporalDisplacement": "âœ… å¯¦ç¾"
  }
}
```

### å‰ç«¯å‘ˆç¾å»ºè­°
```typescript
// React Component ç°¡åŒ–å‘ˆç¾
interface Stage6Validation {
  // ä¸»è¦ç‹€æ…‹åœ“åœˆ (ç¶ è‰²âœ“/ç´…è‰²âœ—/é»ƒè‰²è™•ç†ä¸­)
  status: 'completed' | 'processing' | 'failed' | 'pending';
  
  // é—œéµæ•¸å­—å¡ç‰‡
  cards: [
    { label: 'Starlinkæ± ', value: '225', icon: 'ğŸ›°ï¸' },
    { label: 'OneWebæ± ', value: '70', icon: 'ğŸŒ' },
    { label: 'è¦†è“‹ç‡', value: '100%', icon: 'ğŸ“¡' },
    { label: 'æ™‚ç©ºåˆ†é›¢', value: 'å„ªç§€', icon: 'âš¡' }
  ];
  
  // è¦†è“‹é€£çºŒæ€§åœ–è¡¨
  coverageChart: {
    type: 'area',
    data: {
      starlink: Array(192).fill(12.5),  // å¹³å‡12.5é¡†å¯è¦‹
      oneweb: Array(192).fill(4.5),     // å¹³å‡4.5é¡†å¯è¦‹
      minimum_starlink: 10,
      minimum_oneweb: 3
    }
  };
  
  // æ™‚ç©ºåˆ†é›¢ç†±åŠ›åœ–
  spatialDistribution: {
    type: 'heatmap',
    data: {
      raan_distribution: 'uniform',
      phase_separation: 'excellent',
      collision_risk: 'minimal'
    }
  };
}
```

### API ç«¯é»è¦æ ¼
```yaml
# ç²å–éšæ®µé©—è­‰ç‹€æ…‹
GET /api/pipeline/validation/stage/6
Response:
  - 200: è¿”å›é©—è­‰å¿«ç…§ JSON
  - 404: éšæ®µå°šæœªåŸ·è¡Œ

# ç²å–å‹•æ…‹æ± çµ±è¨ˆ
GET /api/pipeline/dynamic-pool/statistics
Response:
  starlink: {
    poolSize: 225,
    minVisible: 10,
    maxVisible: 15,
    avgVisible: 12.5
  },
  oneweb: {
    poolSize: 70,
    minVisible: 3,
    maxVisible: 6,
    avgVisible: 4.5
  }

# é©—è­‰æ™‚ç©ºéŒ¯ç½®æ•ˆæœ
GET /api/pipeline/dynamic-pool/spatiotemporal-validation
Response:
  phaseDistribution: 'uniform',
  raanSeparation: 'excellent',
  temporalGaps: 0,
  score: 95
```

### è¦–è¦ºåŒ–å‘ˆç¾ç¯„ä¾‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stage 6: å‹•æ…‹è¡›æ˜Ÿæ± è¦åŠƒ â­         â”‚
â”‚  âœ… å®Œæˆ (3åˆ†é˜)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ›°ï¸ Starlink: 225é¡† (10-15å¯è¦‹)   â”‚
â”‚  ğŸŒ OneWeb: 70é¡† (3-6å¯è¦‹)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¦†è“‹é€£çºŒæ€§: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%    â”‚
â”‚  æ™‚ç©ºåˆ†é›¢åº¦: â­â­â­â­â­ å„ªç§€      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è»Œé“é€±æœŸé©—è­‰:                     â”‚
â”‚  STL: 93.63åˆ† âœ“  OW: 109.64åˆ† âœ“  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æœ€çµ‚é©—è­‰: 10/10 âœ…                 â”‚
â”‚  ğŸ¯ ä»»å‹™é”æˆï¼                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¦†è“‹é€£çºŒæ€§è¦–è¦ºåŒ–
```javascript
// æ™‚é–“è»¸è¦†è“‹è¦–è¦ºåŒ–
const CoverageContinuity = ({ data }) => {
  return (
    <div className="coverage-continuity">
      <h4>è¡›æ˜Ÿå¯è¦‹æ€§æ™‚é–“è»¸</h4>
      <div className="timeline">
        <div className="starlink-track">
          <label>Starlink (ç›®æ¨™: 10-15)</label>
          <div className="coverage-bar">
            {data.starlink.map((count, i) => (
              <div
                key={i}
                className="time-slot"
                style={{
                  backgroundColor: count >= 10 ? '#4CAF50' : '#FF5252',
                  height: `${count * 4}px`
                }}
                title={`æ™‚é–“${i}: ${count}é¡†`}
              />
            ))}
          </div>
          <div className="stats">
            æœ€å°: {data.starlinkMin} | å¹³å‡: {data.starlinkAvg} | æœ€å¤§: {data.starlinkMax}
          </div>
        </div>
        
        <div className="oneweb-track">
          <label>OneWeb (ç›®æ¨™: 3-6)</label>
          <div className="coverage-bar">
            {data.oneweb.map((count, i) => (
              <div
                key={i}
                className="time-slot"
                style={{
                  backgroundColor: count >= 3 ? '#2196F3' : '#FF5252',
                  height: `${count * 10}px`
                }}
                title={`æ™‚é–“${i}: ${count}é¡†`}
              />
            ))}
          </div>
          <div className="stats">
            æœ€å°: {data.onewebMin} | å¹³å‡: {data.onewebAvg} | æœ€å¤§: {data.onewebMax}
          </div>
        </div>
      </div>
    </div>
  );
};
```

### æ™‚ç©ºåˆ†é›¢åº¦çŸ©é™£
```javascript
// è»Œé“ç›¸ä½åˆ†ä½ˆè¦–è¦ºåŒ–
const OrbitalPhaseMatrix = ({ satellites }) => {
  const phaseGroups = groupByPhase(satellites);
  
  return (
    <div className="phase-matrix">
      <h4>è»Œé“ç›¸ä½åˆ†ä½ˆ (æ™‚ç©ºéŒ¯ç½®)</h4>
      <div className="matrix-grid">
        {phaseGroups.map((group, i) => (
          <div key={i} className="phase-group">
            <div className="raan">RAAN: {group.raan}Â°</div>
            <div className="satellites">
              {group.satellites.map(sat => (
                <div 
                  key={sat.id}
                  className="sat-dot"
                  style={{
                    left: `${sat.meanAnomaly / 360 * 100}%`,
                    backgroundColor: sat.constellation === 'starlink' ? '#FF9800' : '#2196F3'
                  }}
                  title={`${sat.id}: MA=${sat.meanAnomaly}Â°`}
                />
              ))}
            </div>
          </div>
        ))}
      </div>
      <div className="legend">
        <span>ğŸŸ  Starlink</span>
        <span>ğŸ”µ OneWeb</span>
        <span>åˆ†ä½ˆè¶Šå‡å‹» = æ™‚ç©ºéŒ¯ç½®è¶Šå¥½</span>
      </div>
    </div>
  );
};
```

### æœ€çµ‚é©—è­‰å„€è¡¨æ¿
```javascript
// å…­éšæ®µå®Œæ•´é©—è­‰ç¸½è¦½
const PipelineValidationDashboard = () => {
  const stages = [
    { num: 1, name: 'TLEè¼‰å…¥', status: 'completed', time: '45s' },
    { num: 2, name: 'æ™ºèƒ½ç¯©é¸', status: 'completed', time: '90s' },
    { num: 3, name: 'ä¿¡è™Ÿåˆ†æ', status: 'completed', time: '3m' },
    { num: 4, name: 'æ™‚é–“åºåˆ—', status: 'completed', time: '1m' },
    { num: 5, name: 'æ•¸æ“šæ•´åˆ', status: 'completed', time: '2m' },
    { num: 6, name: 'å‹•æ…‹æ± ', status: 'completed', time: '3m' }
  ];
  
  return (
    <div className="validation-dashboard">
      <h3>ğŸ¯ å…­éšæ®µè™•ç†å®Œæˆ</h3>
      <div className="stage-flow">
        {stages.map((stage, i) => (
          <React.Fragment key={stage.num}>
            <div className={`stage-node ${stage.status}`}>
              <div className="stage-number">{stage.num}</div>
              <div className="stage-name">{stage.name}</div>
              <div className="stage-time">{stage.time}</div>
              <div className="stage-icon">âœ…</div>
            </div>
            {i < stages.length - 1 && <div className="flow-arrow">â†’</div>}
          </React.Fragment>
        ))}
      </div>
      
      <div className="final-result">
        <h4>æœ€çµ‚æˆæœ</h4>
        <div className="result-grid">
          <div className="result-item">
            <span className="label">Starlinkè¡›æ˜Ÿæ± </span>
            <span className="value">225é¡†</span>
            <span className="status">âœ… 10-15é¡†æŒçºŒå¯è¦‹</span>
          </div>
          <div className="result-item">
            <span className="label">OneWebè¡›æ˜Ÿæ± </span>
            <span className="value">70é¡†</span>
            <span className="status">âœ… 3-6é¡†æŒçºŒå¯è¦‹</span>
          </div>
          <div className="result-item">
            <span className="label">æ™‚ç©ºéŒ¯ç½®</span>
            <span className="value">å¯¦ç¾</span>
            <span className="status">âœ… è»Œé“ç›¸ä½å‡å‹»åˆ†ä½ˆ</span>
          </div>
          <div className="result-item">
            <span className="label">ç¸½è™•ç†æ™‚é–“</span>
            <span className="value">10.5åˆ†é˜</span>
            <span className="status">âœ… æ•ˆç‡é”æ¨™</span>
          </div>
        </div>
      </div>
    </div>
  );
};
```

### ğŸ”” å¯¦ç¾æ³¨æ„äº‹é …
1. **æ™‚ç©ºéŒ¯ç½®é©—è­‰**ï¼š
   - ç¢ºä¿è»Œé“ç›¸ä½å‡å‹»åˆ†ä½ˆ
   - é©—è­‰RAANåˆ†é›¢åº¦
   - æª¢æŸ¥Mean Anomalyåˆ†æ•£æ€§

2. **è¦†è“‹é€£çºŒæ€§ç›£æ§**ï¼š
   - æ¯30ç§’æ™‚é–“çª—æª¢æŸ¥
   - ç¢ºä¿ç„¡è¦†è“‹ç©ºéš™
   - é©—è­‰æœ€å°å¯è¦‹è¡›æ˜Ÿæ•¸

3. **æœ€çµ‚äº¤ä»˜é©—è­‰**ï¼š
   - ç¢ºèªæ‰€æœ‰å…­éšæ®µå®Œæˆ
   - é©—è­‰è¡›æ˜Ÿæ± ç¬¦åˆéœ€æ±‚
   - ç”Ÿæˆå®Œæ•´é©—è­‰å ±å‘Š

---

**ä¸Šä¸€éšæ®µ**: [éšæ®µäº”ï¼šæ•¸æ“šæ•´åˆ](./stage5-integration.md)  
**ç›®æ¨™ç‹€æ…‹**: å»ºç«‹å¯ä¿è­‰å®Œæ•´è»Œé“é€±æœŸè¦†è“‹çš„æ™‚ç©ºéŒ¯ç½®å‹•æ…‹è¡›æ˜Ÿæ± 

---

ğŸ¯ **éšæ®µå…­çµ‚æ¥µç›®æ¨™**ï¼šå¯¦ç¾ã€Œä»»ä½•æ™‚åˆ» NTPU ä¸Šç©ºéƒ½æœ‰ 10-15 é¡† Starlink + 3-6 é¡† OneWeb å¯è¦‹è¡›æ˜Ÿã€çš„å®Œç¾è¦†è“‹ï¼Œç‚º LEO è¡›æ˜Ÿåˆ‡æ›ç ”ç©¶æä¾›å¯é çš„å¯¦é©—ç’°å¢ƒã€‚