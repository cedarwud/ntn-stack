# ğŸ¯ éšæ®µäºŒï¼šæ™ºèƒ½è¡›æ˜Ÿç¯©é¸

[ğŸ”„ è¿”å›æ•¸æ“šæµç¨‹å°èˆª](../README.md) > éšæ®µäºŒ

## ğŸ“– éšæ®µæ¦‚è¿°

**ç›®æ¨™**ï¼šå¾ 8,796 é¡†è¡›æ˜Ÿæ™ºèƒ½ç¯©é¸è‡³é«˜å“è³ªå€™é¸è¡›æ˜Ÿ  
**è¼¸å…¥**ï¼šTLEè»Œé“è¨ˆç®—è™•ç†å™¨è¨˜æ†¶é«”å‚³éçš„è»Œé“è¨ˆç®—çµæœ  
**è¼¸å‡º**ï¼šè¨˜æ†¶é«”å‚³éçµ¦ä¿¡è™Ÿå“è³ªåˆ†æè™•ç†å™¨  
**å¯¦éš›çµæœ**ï¼š1,196 é¡†è¡›æ˜Ÿ (1,029 Starlink + 167 OneWeb)
**ç¯©é¸ç‡**ï¼š13.6% ä¿ç•™ç‡ï¼Œå¤§å¹…æ”¹å–„æ•¸æ“šæµå‘å¾ŒçºŒéšæ®µ  
**è™•ç†æ™‚é–“**ï¼šç´„ 1-2 åˆ†é˜

### ğŸš€ v1.1 éåº¦ç¯©é¸ä¿®å¾©ç‰ˆæœ¬

- **ğŸ”§ æ ¸å¿ƒä¿®å¾©**ï¼šâœ… **è§£æ±ºéåº¦ç¯©é¸å•é¡Œ**
  - **å¯è¦‹æ€§æ™‚é–“è¦æ±‚**ï¼šStarlinkå¾ 5.0â†’1.0 åˆ†é˜ï¼ŒOneWebå¾ 2.0â†’0.5 åˆ†é˜
  - **å“è³ªé»è¦æ±‚**ï¼šå¾ 10â†’3 å€‹æœ€ä½³ä»°è§’é» (å¤§å¹…æ”¾å¯¬å“è³ªè¦æ±‚)
  - **å‹•æ…‹é–€æª»**ï¼šä½¿ç”¨çµ±ä¸€ä»°è§’ç®¡ç†å™¨çš„å¯¦éš›é–€æª»å€¼
  - **æ•¸æ“šå®Œæ•´æ€§**ï¼šç¢ºä¿è¶³å¤ è¡›æ˜Ÿæµå‘å¾ŒçºŒéšæ®µè™•ç†

### ğŸš€ v3.0 è¨˜æ†¶é«”å‚³éæ¨¡å¼

- **å•é¡Œè§£æ±º**ï¼šé¿å…ç”Ÿæˆ 2.4GB ç¯©é¸çµæœæª”æ¡ˆ
- **å‚³éæ–¹å¼**ï¼šç›´æ¥å°‡ç¯©é¸çµæœåœ¨è¨˜æ†¶é«”ä¸­å‚³éçµ¦éšæ®µä¸‰
- **æ•ˆèƒ½æå‡**ï¼šæ¶ˆé™¤å¤§æª”æ¡ˆI/Oï¼Œæ¸›å°‘ç£ç¢Ÿç©ºé–“ä½¿ç”¨

## ğŸ§  æ™ºèƒ½ç¯©é¸æ¼”ç®—æ³•

### å…­éšæ®µç¯©é¸ç®¡ç·š

1. **æ˜Ÿåº§åˆ†é›¢ç¯©é¸** (8,735 â†’ 8,735)
   - åˆ†é›¢Starlinkå’ŒOneWebæ˜Ÿåº§æ•¸æ“š
   - æº–å‚™å¾ŒçºŒå°ˆç”¨ç¯©é¸é‚è¼¯

2. **åœ°ç†ç›¸é—œæ€§ç¯©é¸** (8,730 â†’ 1,184)
   - åŸºæ–¼NTPUè§€æ¸¬é»çš„åœ°ç†ä½ç½®ç¯©é¸
   - æ’é™¤åœ°ç†ä¸Šä¸ç›¸é—œçš„è¡›æ˜Ÿ (æ¸›å°‘86.4%)
   - ä½¿ç”¨çµ±ä¸€ä»°è§’é–€æª»ï¼šStarlink 5Â°, OneWeb 10Â°

3. **æ›æ‰‹é©ç”¨æ€§è©•åˆ†** (1,184 â†’ 1,184)
   - å°é€šéåœ°ç†ç¯©é¸çš„è¡›æ˜Ÿé€²è¡Œæ›æ‰‹è©•åˆ†
   - è©•ä¼°æ¯é¡†è¡›æ˜Ÿçš„æ›æ‰‹æ½›åŠ›

**å¯¦éš›ç¯©é¸çµæœï¼š**
- Starlink: 1,039é¡† (å¾8,079é¡†ç¯©é¸ï¼Œä¿ç•™ç‡12.9%)
- OneWeb: 145é¡† (å¾651é¡†ç¯©é¸ï¼Œä¿ç•™ç‡22.3%)
- ç¸½è¨ˆ: 1,184é¡†è¡›æ˜Ÿä¿ç•™

## ğŸ—ï¸ æ ¸å¿ƒè™•ç†å™¨æ¶æ§‹

### ä¸»è¦å¯¦ç¾ä½ç½®
```bash
# æ™ºèƒ½ç¯©é¸è™•ç†å™¨
/netstack/src/stages/intelligent_satellite_filter_processor.py
â”œâ”€â”€ IntelligentSatelliteFilterProcessor.process_intelligent_filtering()    # ä¸»ç¯©é¸é‚è¼¯
â”œâ”€â”€ IntelligentSatelliteFilterProcessor.load_orbital_calculation_output()  # è¼‰å…¥è»Œé“æ•¸æ“š
â””â”€â”€ IntelligentSatelliteFilterProcessor.execute_intelligent_filtering()    # æ™ºèƒ½ç¯©é¸åŸ·è¡Œ

# çµ±ä¸€æ™ºèƒ½ç¯©é¸ç³»çµ±
/netstack/src/services/satellite/intelligent_filtering/unified_intelligent_filter.py
â”œâ”€â”€ UnifiedIntelligentFilter.execute_f2_filtering_workflow()  # F2ç¯©é¸æµç¨‹
â”œâ”€â”€ UnifiedIntelligentFilter.geographical_relevance_filter() # åœ°ç†ç›¸é—œæ€§ç¯©é¸
â””â”€â”€ UnifiedIntelligentFilter.handover_suitability_scoring()  # æ›æ‰‹é©ç”¨æ€§è©•åˆ†
/netstack/config/satellite_data_pool_builder.py        # åŸºç¤è¡›æ˜Ÿæ± å»ºæ§‹
```

## ğŸ¯ ç¯©é¸æº–å‰‡è©³ç´°èªªæ˜

### å¯è¦‹æ€§æº–å‰‡
- **æœ€ä½ä»°è§’**ï¼š5Â° (Starlink), 10Â° (OneWeb)
- **æœ€ä½å¯è¦‹æ™‚é–“**ï¼šç´¯è¨ˆ15åˆ†é˜ä»¥ä¸Š
- **æœå‹™çª—å£**ï¼šè‡³å°‘3å€‹ç¨ç«‹å¯è¦‹çª—å£

### ä¿¡è™Ÿå“è³ªé ä¼°
- **RSRPé–€æª»**ï¼šâ‰¥ -110 dBm (åŸºæ–¼è‡ªç”±ç©ºé–“è·¯å¾‘æè€—)
- **è·é›¢é™åˆ¶**ï¼šâ‰¤ 2,000 km
- **éƒ½åœå‹’é »ç§»**ï¼šâ‰¤ Â±40 kHz

### è² è¼‰å¹³è¡¡ç­–ç•¥
```python
# æ˜Ÿåº§åˆ†é…æ¯”ä¾‹
target_ratios = {
    'starlink': 0.80,  # ~450é¡† (80%)
    'oneweb': 0.20     # ~113é¡† (20%)
}
```

## âš¡ æ€§èƒ½æœ€ä½³åŒ–

### è¨˜æ†¶é«”æœ€ä½³åŒ–
- **æ‰¹æ¬¡è™•ç†**ï¼šæ¯æ¬¡è™•ç†500é¡†è¡›æ˜Ÿ
- **è¨˜æ†¶é«”å›æ”¶**ï¼šåŠæ™‚æ¸…ç†ä¸­é–“çµæœ
- **æ•¸æ“šå£“ç¸®**ï¼šä½¿ç”¨é«˜æ•ˆçš„æ•¸æ“šçµæ§‹

### æ¼”ç®—æ³•æœ€ä½³åŒ–
- **é å…ˆæ’åº**ï¼šæŒ‰å¯è¦‹æ€§æ©Ÿç‡æ’åº
- **æ—©æœŸçµ‚æ­¢**ï¼šé”åˆ°ç›®æ¨™æ•¸é‡å³åœæ­¢
- **ä¸¦è¡Œè™•ç†**ï¼šæ”¯æ´å¤šåŸ·è¡Œç·’è¨ˆç®—

## ğŸ“Š ç¯©é¸çµæœçµ±è¨ˆ

### é æœŸè¼¸å‡ºåˆ†ä½ˆ
```
ç¸½è¨ˆï¼š563é¡†è¡›æ˜Ÿ
â”œâ”€â”€ Starlink: ~450é¡† (80%)
â”‚   â”œâ”€â”€ é«˜ä»°è§’ (>30Â°): ~150é¡†
â”‚   â”œâ”€â”€ ä¸­ä»°è§’ (15-30Â°): ~200é¡†
â”‚   â””â”€â”€ ä½ä»°è§’ (5-15Â°): ~100é¡†
â””â”€â”€ OneWeb: ~113é¡† (20%)
    â”œâ”€â”€ é«˜ä»°è§’ (>30Â°): ~40é¡†
    â”œâ”€â”€ ä¸­ä»°è§’ (15-30Â°): ~50é¡†
    â””â”€â”€ ä½ä»°è§’ (10-15Â°): ~23é¡†
```

## ğŸ”§ é…ç½®åƒæ•¸

```python
# ç¯©é¸åƒæ•¸
FILTERING_CONFIG = {
    'starlink': {
        'min_elevation_deg': 5.0,
        'min_visible_time_min': 15.0,
        'target_count': 450
    },
    'oneweb': {
        'min_elevation_deg': 10.0,
        'min_visible_time_min': 15.0,
        'target_count': 113
    }
}
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **ç¯©é¸æ•¸é‡ä¸è¶³**
   - æª¢æŸ¥ï¼šé™ä½ç¯©é¸é–€æª»
   - è§£æ±ºï¼šèª¿æ•´ min_elevation_deg æˆ– min_visible_time_min

2. **æ˜Ÿåº§æ¯”ä¾‹å¤±è¡¡**
   - æª¢æŸ¥ï¼šå„æ˜Ÿåº§åŸå§‹æ•¸æ“šé‡
   - è§£æ±ºï¼šèª¿æ•´ target_count æ¯”ä¾‹

3. **è¨˜æ†¶é«”ä½¿ç”¨éé«˜**
   - æª¢æŸ¥ï¼šbatch_size è¨­å®š
   - è§£æ±ºï¼šæ¸›å°‘æ‰¹æ¬¡è™•ç†å¤§å°

### è¨ºæ–·æŒ‡ä»¤

```bash
# æª¢æŸ¥ç¯©é¸çµ±è¨ˆ
python -c "
from src.services.satellite.preprocessing.satellite_selector import *
print('ç¯©é¸å™¨æ¨¡çµ„è¼‰å…¥æˆåŠŸ')
"

# é©—è­‰è¨˜æ†¶é«”ä½¿ç”¨
top -p $(pgrep -f satellite_orbit_preprocessor) -n 1
```

## âœ… éšæ®µé©—è­‰æ¨™æº–

### ğŸ¯ Stage 2 å®Œæˆé©—è­‰æª¢æŸ¥æ¸…å–®

#### 1. **è¼¸å…¥é©—è­‰**
- [ ] æ¥æ”¶Stage 1æ•¸æ“šå®Œæ•´æ€§
  - è¼¸å…¥è¡›æ˜Ÿç¸½æ•¸ > 8,000é¡†
  - Starlinkå’ŒOneWebæ•¸æ“šéƒ½å­˜åœ¨
  - æ¯é¡†è¡›æ˜ŸåŒ…å«å®Œæ•´è»Œé“æ•¸æ“š
- [ ] è¨˜æ†¶é«”å‚³éæ¨¡å¼æª¢æŸ¥
  - ç¢ºèªä½¿ç”¨è¨˜æ†¶é«”å‚³éï¼ˆv3.0æ¨¡å¼ï¼‰
  - ç„¡å¤§å‹ä¸­é–“æ–‡ä»¶ç”Ÿæˆ

#### 2. **ç¯©é¸éç¨‹é©—è­‰**
- [ ] **åœ°ç†ç›¸é—œæ€§ç¯©é¸**
  ```
  NTPUåº§æ¨™: 24Â°56'39"N 121Â°22'17"E
  ä»°è§’é–¾å€¼:
  - Starlink: 5åº¦ï¼ˆç”¨æˆ¶éœ€æ±‚ï¼‰
  - OneWeb: 10åº¦ï¼ˆç”¨æˆ¶éœ€æ±‚ï¼‰
  ç¯©é¸ä¿ç•™ç‡: 10-15%
  ```
- [ ] **å¯è¦‹æ€§è¦æ±‚**
  - æœ€ä½å¯è¦‹æ™‚é–“ï¼šStarlink â‰¥ 1.0åˆ†é˜ï¼ŒOneWeb â‰¥ 0.5åˆ†é˜
  - å“è³ªé»æ•¸é‡ï¼šâ‰¥ 3å€‹æœ€ä½³ä»°è§’é»
- [ ] **ç¯©é¸ç®¡ç·šå®Œæ•´æ€§**
  1. æ˜Ÿåº§åˆ†é›¢ç¯©é¸ âœ“
  2. åœ°ç†ç›¸é—œæ€§ç¯©é¸ âœ“
  3. æ›æ‰‹é©ç”¨æ€§è©•åˆ† âœ“

#### 3. **è¼¸å‡ºé©—è­‰**
- [ ] **ç¯©é¸çµæœæ•¸é‡**
  ```
  é æœŸç¯„åœ:
  - Starlink: 1,000-1,200é¡†ï¼ˆç´„12-15%ä¿ç•™ç‡ï¼‰
  - OneWeb: 150-200é¡†ï¼ˆç´„20-25%ä¿ç•™ç‡ï¼‰
  - ç¸½è¨ˆ: 1,150-1,400é¡†
  ```
- [ ] **æ•¸æ“šçµæ§‹é©—è­‰**
  ```json
  {
    "metadata": {
      "stage": "stage2_intelligent_filtering",
      "total_input_satellites": 8779,
      "total_filtered_satellites": 1196,
      "filtering_rate": 0.136
    },
    "filtered_satellites": {
      "starlink": [...],  // åŒ…å«ç¯©é¸å¾Œçš„è¡›æ˜Ÿ
      "oneweb": [...]     // åŒ…å«ç¯©é¸å¾Œçš„è¡›æ˜Ÿ
    }
  }
  ```
- [ ] **è¡›æ˜Ÿæ•¸æ“šå®Œæ•´æ€§**
  - æ¯é¡†è¡›æ˜Ÿä¿ç•™å®Œæ•´çš„ `position_timeseries`
  - å¯è¦‹æ€§çª—å£æ•¸æ“šæ­£ç¢º
  - ä¿¡è™Ÿé ä¼°å€¼åˆç†ï¼ˆRSRP > -120 dBmï¼‰

#### 4. **æ€§èƒ½æŒ‡æ¨™**
- [ ] è™•ç†æ™‚é–“ < 2åˆ†é˜
- [ ] è¨˜æ†¶é«”ä½¿ç”¨ < 500MB
- [ ] ç¯©é¸ç‡åœ¨åˆç†ç¯„åœï¼ˆ10-20%ï¼‰

#### 5. **è‡ªå‹•é©—è­‰è…³æœ¬**
```python
# åŸ·è¡Œéšæ®µé©—è­‰
python -c "
import json
import sys

# è¼‰å…¥è¼¸å‡ºæ•¸æ“šï¼ˆè¨˜æ†¶é«”æ¨¡å¼æˆ–æ–‡ä»¶æ¨¡å¼ï¼‰
try:
    with open('/app/data/intelligent_filtering_outputs/intelligent_filtered_output.json', 'r') as f:
        data = json.load(f)
except:
    print('âš ï¸ ä½¿ç”¨è¨˜æ†¶é«”å‚³éæ¨¡å¼ï¼Œè·³éæ–‡ä»¶é©—è­‰')
    # åœ¨è¨˜æ†¶é«”æ¨¡å¼ä¸‹ï¼Œé©—è­‰æ‡‰åœ¨è™•ç†å™¨å…§éƒ¨å®Œæˆ
    sys.exit(0)

# é©—è­‰é …ç›®
metadata = data.get('metadata', {})
filtered = data.get('filtered_satellites', {})

starlink_count = len(filtered.get('starlink', []))
oneweb_count = len(filtered.get('oneweb', []))
total_filtered = starlink_count + oneweb_count

checks = {
    'input_count_valid': metadata.get('total_input_satellites', 0) > 8000,
    'starlink_filtered': 1000 <= starlink_count <= 1300,
    'oneweb_filtered': 140 <= oneweb_count <= 200,
    'total_filtered': 1100 <= total_filtered <= 1500,
    'filtering_rate': 0.10 <= metadata.get('filtering_rate', 0) <= 0.20,
    'has_timeseries': all(
        'position_timeseries' in sat 
        for constellation in filtered.values() 
        for sat in constellation[:5]  # æª¢æŸ¥å‰5é¡†
    )
}

# è¨ˆç®—é€šéç‡
passed = sum(checks.values())
total = len(checks)

print('ğŸ“Š Stage 2 é©—è­‰çµæœ:')
print(f'  è¼¸å…¥è¡›æ˜Ÿæ•¸: {metadata.get(\"total_input_satellites\", 0)}')
print(f'  Starlinkç¯©é¸: {starlink_count} é¡†')
print(f'  OneWebç¯©é¸: {oneweb_count} é¡†')
print(f'  ç¸½ç¯©é¸ç‡: {metadata.get(\"filtering_rate\", 0):.1%}')
print('\\né©—è­‰é …ç›®:')
for check, result in checks.items():
    print(f'  {\"âœ…\" if result else \"âŒ\"} {check}')
print(f'\\nç¸½è¨ˆ: {passed}/{total} é …é€šé')

if passed == total:
    print('âœ… Stage 2 é©—è­‰é€šéï¼')
else:
    print('âŒ Stage 2 é©—è­‰å¤±æ•—ï¼Œè«‹æª¢æŸ¥ä¸Šè¿°é …ç›®')
    sys.exit(1)
"
```

### ğŸš¨ é©—è­‰å¤±æ•—è™•ç†
1. **ç¯©é¸æ•¸é‡éå°‘**
   - é™ä½ä»°è§’é–¾å€¼è¦æ±‚
   - æ¸›å°‘æœ€ä½å¯è¦‹æ™‚é–“è¦æ±‚
   - æª¢æŸ¥åœ°ç†ä½ç½®è¨­å®šæ˜¯å¦æ­£ç¢º
2. **ç¯©é¸æ•¸é‡éå¤š**
   - æé«˜ç¯©é¸æ¨™æº–
   - å¢åŠ å“è³ªè¦æ±‚
3. **æ™‚é–“åºåˆ—ç¼ºå¤±**
   - ç¢ºèªStage 1è¼¸å‡ºåŒ…å«å®Œæ•´æ•¸æ“š
   - æª¢æŸ¥è¨˜æ†¶é«”å‚³éæ˜¯å¦æ­£å¸¸
4. **æ˜Ÿåº§æ¯”ä¾‹å¤±è¡¡**
   - èª¿æ•´å„æ˜Ÿåº§çš„ç¯©é¸åƒæ•¸
   - æª¢æŸ¥åŸå§‹æ•¸æ“šåˆ†ä½ˆ

### ğŸ“Š é—œéµæŒ‡æ¨™
- **ç¯©é¸æ•ˆç‡**: ä¿ç•™10-15%çš„é«˜å“è³ªå€™é¸è¡›æ˜Ÿ
- **åœ°ç†è¦†è“‹**: ç¢ºä¿NTPUä¸Šç©ºæœ‰è¶³å¤ å¯è¦‹è¡›æ˜Ÿ
- **æ•¸æ“šå®Œæ•´**: ä¿ç•™å®Œæ•´è»Œé“æ•¸æ“šä¾›å¾ŒçºŒè™•ç†

## ğŸ–¥ï¸ å‰ç«¯ç°¡åŒ–ç‰ˆé©—è­‰å‘ˆç¾

### ğŸ”” è¨˜æ†¶é«”å‚³éæ¨¡å¼ç‰¹åˆ¥èªªæ˜
ç”±æ–¼ Stage 2 æ¡ç”¨ v3.0 è¨˜æ†¶é«”å‚³éæ¨¡å¼ï¼Œç„¡æª”æ¡ˆè¼¸å‡ºï¼Œéœ€è¦ç‰¹åˆ¥è™•ç†ï¼š

```python
# åœ¨ IntelligentSatelliteFilterProcessor ä¸­æ·»åŠ é©—è­‰å¿«ç…§åŠŸèƒ½
def save_validation_snapshot(self):
    """ä¿å­˜è¼•é‡ç´šé©—è­‰å¿«ç…§ä¾›å‰ç«¯è®€å–"""
    snapshot = {
        "stage": 2,
        "stageName": "æ™ºèƒ½è¡›æ˜Ÿç¯©é¸",
        "timestamp": datetime.utcnow().isoformat() + "Z",
        "status": "completed",
        "keyMetrics": {
            "è¼¸å…¥è¡›æ˜Ÿ": self.total_input,
            "Starlinkç¯©é¸": self.starlink_filtered,
            "OneWebç¯©é¸": self.oneweb_filtered,
            "ç¯©é¸ç‡": f"{self.filtering_rate:.1%}",
            "åœ°ç†ç›¸é—œæ€§": f"{self.geo_relevant_count}é¡†"
        },
        "validation": self.validation_results
    }
    
    # ä¿å­˜å¿«ç…§åˆ°ç‰¹å®šä½ç½®ä¾›å‰ç«¯è®€å–
    snapshot_path = "/app/data/validation_snapshots/stage2_validation.json"
    with open(snapshot_path, 'w') as f:
        json.dump(snapshot, f)
```

### é©—è­‰å¿«ç…§ä½ç½®
```bash
# é©—è­‰çµæœå¿«ç…§ (è¼•é‡ç´šï¼Œä¾›å‰ç«¯è®€å–)
/app/data/validation_snapshots/stage2_validation.json
```

### JSON æ ¼å¼ç¯„ä¾‹
```json
{
  "stage": 2,
  "stageName": "æ™ºèƒ½è¡›æ˜Ÿç¯©é¸",
  "timestamp": "2025-08-14T08:02:00Z",
  "status": "completed",
  "duration_seconds": 90,
  "keyMetrics": {
    "è¼¸å…¥è¡›æ˜Ÿ": 8796,
    "Starlinkç¯©é¸": 1039,
    "OneWebç¯©é¸": 145,
    "ç¸½ç¯©é¸": 1184,
    "ç¯©é¸ç‡": "13.6%",
    "åœ°ç†ç›¸é—œæ€§": "1184é¡†"
  },
  "validation": {
    "passed": true,
    "totalChecks": 6,
    "passedChecks": 6,
    "failedChecks": 0,
    "criticalChecks": [
      {"name": "åœ°ç†ç¯©é¸", "status": "passed", "detail": "NTPUä¸Šç©ºå¯è¦‹"},
      {"name": "ä»°è§’é–¾å€¼", "status": "passed", "detail": "Starlinkâ‰¥5Â°, OneWebâ‰¥10Â°"},
      {"name": "æ›æ‰‹è©•åˆ†", "status": "passed", "detail": "æ™‚ç©ºéŒ¯ç½®å„ªåŒ–"}
    ]
  },
  "performanceMetrics": {
    "processingTime": "90ç§’",
    "memoryUsage": "300MB",
    "outputMode": "è¨˜æ†¶é«”å‚³é(v3.0)"
  },
  "filteringDetails": {
    "geographicalRelevance": {
      "beforeFilter": 8796,
      "afterFilter": 1184,
      "reductionRate": "86.5%"
    },
    "handoverSuitability": {
      "scored": 1184,
      "highScore": 563,
      "selected": 563
    }
  },
  "nextStage": {
    "ready": true,
    "stage": 3,
    "expectedInput": 1184
  }
}
```

### å‰ç«¯å‘ˆç¾å»ºè­°
```typescript
// React Component ç°¡åŒ–å‘ˆç¾
interface Stage2Validation {
  // ä¸»è¦ç‹€æ…‹åœ“åœˆ (ç¶ è‰²âœ“/ç´…è‰²âœ—/é»ƒè‰²è™•ç†ä¸­)
  status: 'completed' | 'processing' | 'failed' | 'pending';
  
  // é—œéµæ•¸å­—å¡ç‰‡
  cards: [
    { label: 'è¼¸å…¥', value: '8,796', icon: 'ğŸ“¥' },
    { label: 'Starlinkç¯©é¸', value: '1,039', icon: 'ğŸ›°ï¸' },
    { label: 'OneWebç¯©é¸', value: '145', icon: 'ğŸŒ' },
    { label: 'ç¯©é¸ç‡', value: '13.6%', icon: 'ğŸ¯' }
  ];
  
  // ç¯©é¸æ¼æ–—è¦–è¦ºåŒ–
  funnel: {
    stages: [
      { name: 'åŸå§‹', count: 8796, width: '100%' },
      { name: 'åœ°ç†ç¯©é¸', count: 1184, width: '13.6%' },
      { name: 'æœ€çµ‚', count: 563, width: '6.4%' }
    ]
  };
  
  // é©—è­‰æª¢æŸ¥æ¸…å–® (ç°¡åŒ–ç‰ˆ)
  checks: {
    passed: 6,
    total: 6,
    status: 'âœ… å…¨éƒ¨é€šé'
  };
}
```

### API ç«¯é»è¦æ ¼
```yaml
# ç²å–éšæ®µé©—è­‰ç‹€æ…‹ï¼ˆè¨˜æ†¶é«”æ¨¡å¼ç‰¹åˆ¥è™•ç†ï¼‰
GET /api/pipeline/validation/stage/2
Response:
  - 200: è¿”å›é©—è­‰å¿«ç…§ JSON
  - 404: éšæ®µå°šæœªåŸ·è¡Œæˆ–å¿«ç…§ä¸å­˜åœ¨
  - 503: è¨˜æ†¶é«”å‚³éä¸­ï¼Œæš«æ™‚ç„¡æ³•æä¾›

# å¼·åˆ¶ç”Ÿæˆé©—è­‰å¿«ç…§ï¼ˆç”¨æ–¼è¨˜æ†¶é«”æ¨¡å¼ï¼‰
POST /api/pipeline/validation/stage/2/snapshot
Response:
  - 201: å¿«ç…§å·²å‰µå»º
  - 409: éšæ®µæ­£åœ¨åŸ·è¡Œä¸­
```

### è¦–è¦ºåŒ–å‘ˆç¾ç¯„ä¾‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stage 2: æ™ºèƒ½è¡›æ˜Ÿç¯©é¸              â”‚
â”‚  âœ… å®Œæˆ (90ç§’) [è¨˜æ†¶é«”æ¨¡å¼]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“¥ 8,796 â†’ ğŸ¯ 1,184 (13.6%)      â”‚
â”‚  ğŸ›°ï¸ STL: 1,039  ğŸŒ OW: 145        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¯©é¸æ¼æ–—:                         â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 8,796              â”‚
â”‚  [â–ˆâ–ˆ]           1,184              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é©—è­‰: 6/6 âœ…                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”” å¯¦ç¾æ³¨æ„äº‹é …
1. **è¨˜æ†¶é«”å‚³éæ¨¡å¼è™•ç†**ï¼š
   - Stage 2 ä½¿ç”¨è¨˜æ†¶é«”å‚³éï¼Œéœ€é¡å¤–å¯¦ç¾å¿«ç…§åŠŸèƒ½
   - åœ¨è™•ç†å™¨å®Œæˆæ™‚èª¿ç”¨ `save_validation_snapshot()`
   - å¿«ç…§æª”æ¡ˆè¦è¼•é‡ç´šï¼ˆ< 1KBï¼‰

2. **å‰ç«¯è¼ªè©¢ç­–ç•¥**ï¼š
   - åˆå§‹æª¢æŸ¥å¿«ç…§æ˜¯å¦å­˜åœ¨
   - è‹¥ä¸å­˜åœ¨ï¼Œé¡¯ç¤ºã€Œè™•ç†ä¸­ã€ç‹€æ…‹
   - æ¯5ç§’è¼ªè©¢ä¸€æ¬¡ç›´åˆ°å¿«ç…§å‡ºç¾

3. **éŒ¯èª¤è™•ç†**ï¼š
   - è¨˜æ†¶é«”æ¨¡å¼å¯èƒ½æ²’æœ‰æŒä¹…åŒ–æ•¸æ“š
   - æä¾›æ‰‹å‹•è§¸ç™¼å¿«ç…§ç”Ÿæˆçš„API

---
**ä¸Šä¸€éšæ®µ**: [éšæ®µä¸€ï¼šTLEè¼‰å…¥](./stage1-tle-loading.md)  
**ä¸‹ä¸€éšæ®µ**: [éšæ®µä¸‰ï¼šä¿¡è™Ÿåˆ†æ](./stage3-signal.md)  
**ç›¸é—œæ–‡æª”**: [æ™ºèƒ½ç¯©é¸æ¼”ç®—æ³•è©³è§£](../algorithms_implementation.md#æ™ºèƒ½ç¯©é¸)
