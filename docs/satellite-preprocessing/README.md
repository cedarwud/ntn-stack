# 🛰️ LEO 衛星資料預處理計畫

**版本**: 1.0.0  
**建立日期**: 2025-01-23  
**適用範圍**: LEO 衛星換手研究 - 資料預處理與選星策略

## 📋 計畫概述

本計畫專注於從真實歷史衛星數據中，篩選出適合研究級換手展示的衛星子集。目標是確保在任何時刻，UE（NTPU）上空都有 **8-12 顆可見衛星**，支援複雜的換手決策研究。

### ⚡ 關鍵特性
- **自動驗證調整**: 120顆 Starlink / 80顆 OneWeb 為起始，自動調整確保覆蓋
- **智能預處理**: 增量更新 + 滑動窗口 + 分層存儲（熱/溫/冷）
- **自動化運維**: Cron 驅動的 TLE 更新與預處理數據刷新

## 🎯 核心目標

### 研究級要求
- **同時可見數量**: 8-12 顆衛星（非 2-4 顆的基本展示）
- **換手複雜度**: 支援 A4/A5/D2 事件觸發的真實換手場景
- **時間連續性**: 衛星錯開出現，避免同時升降
- **數據真實性**: 基於真實 TLE 數據和 SGP4 算法

### 星座需求量化
根據 duty cycle 計算和安全係數：

| 星座 | 軌道週期 | Duty Cycle | 研究起始配置 | 健壯配置 |
|------|----------|------------|-------------|----------|
| **Starlink** | 96分鐘 | 8-10% | 120顆 | 180-240顆 |
| **OneWeb** | 109分鐘 | 16-18% | 60-80顆 | 90-100顆 |

## 📚 文檔架構

### 核心文檔
1. **[選星策略設計](./01-satellite-selection-strategy.md)** - 如何從8000+顆衛星中選出研究子集
2. **[時間序列規劃](./02-timeseries-planning.md)** - 連續運行的時間段設計
3. **[換手事件整合](./03-handover-events-integration.md)** - A4/A5/D2 事件觸發邏輯
4. **[數據流架構](./04-data-flow-architecture.md)** - 基於現有系統的數據流設計
5. **[實施計畫](./05-implementation-plan.md)** - 分階段開發步驟
6. **[驗證與動態調整](./06-validation-and-adjustment.md)** - 覆蓋驗證、動態調整與預處理資料管理 **[新增]**

### 技術附錄
- **[Duty Cycle 計算詳解](./appendix/duty-cycle-calculations.md)**
- **[相位分散算法](./appendix/phase-distribution.md)**
- **[可見性窗口預計算](./appendix/visibility-windows.md)**

## 🔧 現有系統整合點

### 已完成組件（不重複開發）
- ✅ NetStack satellite-ops API - SGP4 計算引擎
- ✅ TLE 數據下載和解析 - Pure Cron 驅動
- ✅ DataSyncContext - 統一數據流管理
- ✅ DynamicSatelliteRenderer - 3D 渲染引擎

### 需要優化的部分
- ⚡ 衛星篩選邏輯 - 從簡單數量限制到智能選擇
- ⚡ 時間戳策略 - 從固定時間到動態窗口
- ⚡ 事件觸發機制 - 整合 A4/A5/D2 判定

## 🚀 快速導航

```bash
# 查看選星策略
cat 01-satellite-selection-strategy.md

# 了解時間規劃
cat 02-timeseries-planning.md

# 檢視換手事件
cat 03-handover-events-integration.md
```

## 📊 預期成果

### 數據特性
- **可見性穩定**: 任何時刻 8-12 顆可見
- **相位分散**: 衛星錯開 15-30 秒出現
- **換手機會**: 每 2-3 分鐘有換手候選
- **事件觸發**: A4/A5/D2 事件正確識別

### 研究價值
- 支援複雜換手決策算法研究
- 提供豐富的狀態空間（為未來 RL 準備）
- 可重現的實驗環境
- 符合 3GPP NTN 標準的真實場景

---

**注意**: 本計畫專注於資料預處理，不包含 RL 實作或前端渲染細節。