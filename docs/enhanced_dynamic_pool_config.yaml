# ğŸ›°ï¸ æ™ºèƒ½è»Œé“ç›¸ä½å‹•æ…‹è¡›æ˜Ÿæ± é…ç½®
# åŸºæ–¼æ™‚ç©ºéŒ¯ç½®ç†è«–é©—è­‰çš„æ™ºèƒ½è¡›æ˜Ÿé¸æ“‡åƒæ•¸
# ç‰ˆæœ¬: v5.0 - 2025-09-01 (è»Œé“å„ªåŒ–ç‰ˆ)

# ========================================
# è§€æ¸¬é»é…ç½®
# ========================================
observer:
  location_name: "NTPU"
  latitude: 24.9442  # 24Â°56'39"N
  longitude: 121.3714  # 121Â°22'17"E
  elevation_m: 50  # æµ·æ‹”é«˜åº¦
  elevation_threshold_deg: 10  # ä»°è§’é–€æª»ï¼ˆæ ¹æ“šæ–‡æª”æ¨™æº–ï¼‰

# ========================================
# ç›®æ¨™è¦†è“‹è¦æ±‚ï¼ˆæ™ºèƒ½å„ªåŒ–ç‰ˆï¼‰
# ========================================
coverage_requirements:
  starlink:
    min_visible: 10
    max_visible: 15
    target_avg: 12.5
    subset_size: 150  # 1.8% é«˜æ•ˆå­é›†ï¼ˆç›¸æ¯”850æ¸›å°‘82.4%ï¼‰
    orbital_phase_optimization: true  # è»Œé“ç›¸ä½å„ªåŒ–
    
  oneweb:
    min_visible: 3
    max_visible: 6
    target_avg: 4.5
    subset_size: 40   # 6.1% ç²¾é¸å­é›†ï¼ˆç›¸æ¯”150æ¸›å°‘73.3%ï¼‰
    orbital_phase_optimization: true  # è»Œé“ç›¸ä½å„ªåŒ–
    
  global:
    coverage_rate_target: 0.95  # 95% æ™‚é–“è¦†è“‹ç‡
    max_gap_minutes: 2  # æœ€å¤§è¦†è“‹é–“éš™
    buffer_percentage: 0.05  # 5% ç·©è¡è¡›æ˜Ÿ

# ========================================
# æ™ºèƒ½è»Œé“ç›¸ä½é¸æ“‡åƒæ•¸ï¼ˆé©—è­‰å„ªåŒ–ï¼‰
# ========================================
orbital_phase_selection:
  enabled: true
  method: "smart_orbital_distribution"  # æ™ºèƒ½è»Œé“åˆ†ä½ˆç®—æ³•
  
  # è»Œé“é€±æœŸé©—è­‰çª—å£
  validation_window_hours: 2  # 2å°æ™‚ï¼ˆè¦†è“‹å®Œæ•´è»Œé“é€±æœŸï¼‰
  
  # æ™‚ç©ºéŒ¯ç½®æ ¸å¿ƒç®—æ³•
  temporal_displacement:
    min_phase_offset_minutes: 15  # æœ€å°ç›¸ä½éŒ¯é–‹
    optimal_coverage_continuity: 0.98  # 98% é€£çºŒè¦†è“‹ç›®æ¨™
  
# ========================================
# å¯è¦‹æ€§é ç¯©é¸åƒæ•¸ï¼ˆå¢å¼·ç‰ˆï¼‰
# ========================================
visibility_prefilter:
  enabled: true
  method: "orbital_geometry_validated"  # åŸºæ–¼é©—è­‰çš„è»Œé“å¹¾ä½•åˆ¤æ–·
  
  # è»Œé“è¦†è“‹è¨ˆç®—åƒæ•¸
  earth_radius_km: 6371.0
  coverage_angle_multiplier: 1.1  # 10% å®¹éŒ¯ä¿‚æ•¸
  
  # ç‰¹æ®Šè»Œé“è™•ç†
  polar_orbit_threshold: 80  # å‚¾è§’ > 80Â° è¦–ç‚ºæ¥µè»Œ
  
  # æ€§èƒ½å„ªåŒ–
  parallel_processing: true
  batch_size: 100
  max_workers: 4

# ========================================
# æ™ºèƒ½æ™‚ç©ºéŒ¯ç½®å„ªåŒ–ç­–ç•¥ï¼ˆé©—è­‰ç‰ˆï¼‰
# ========================================
temporal_spatial_optimization:
  # è»Œé“ç›¸ä½æ™ºèƒ½åˆ†ä½ˆ
  orbital_phase_dispersion:
    enabled: true
    algorithm: "minimal_satellite_coverage"  # æœ€å°è¡›æ˜Ÿæ•¸è¦†è“‹ç®—æ³•
    min_phase_separation_deg: 10  # ç†è«–æœ€ä½³ç›¸ä½é–“éš”
    orbital_plane_diversity: true  # è»Œé“å¹³é¢å¤šæ¨£åŒ–
    
  # æ™‚é–“çª—å£é‡ç–Š
  time_window_overlap:
    min_overlap_seconds: 60  # æœ€å°é‡ç–Šæ™‚é–“
    target_overlap_ratio: 0.2  # 20% é‡ç–Š
    
  # è¦†è“‹é–“éš”ç®¡ç†
  coverage_gap_management:
    starlink_max_gap_minutes: 10
    oneweb_max_gap_minutes: 15
    
  # å‹•æ…‹èª¿æ•´
  dynamic_adjustment:
    enabled: true
    rebalance_interval_minutes: 30
    min_candidates_per_slot: 3

# ========================================
# ç¯©é¸ç®¡ç·šé…ç½®ï¼ˆä¸ƒéšæ®µï¼‰
# ========================================
filtering_pipeline:
  # éšæ®µ 0: å¯è¦‹æ€§é ç¯©é¸
  stage0_visibility:
    enabled: true
    expected_exclusion_rate: 0.1  # é æœŸæ’é™¤ 10%
    
  # éšæ®µ 1: ä¿¡è™Ÿå¼·åº¦ç¯©é¸
  stage1_signal:
    rsrp_threshold_dbm: -120  # æ”¾å¯¬ä»¥ä¿ç•™æ›´å¤šå€™é¸
    expected_retention_rate: 0.7
    
  # éšæ®µ 2: ä»°è§’ç¯©é¸
  stage2_elevation:
    min_elevation_deg: 10
    expected_retention_rate: 0.85
    
  # éšæ®µ 3: éƒ½åœå‹’é »ç§»ç¯©é¸
  stage3_doppler:
    max_doppler_shift_khz: 40
    expected_retention_rate: 0.95
    
  # éšæ®µ 4: æ˜Ÿåº§è² è¼‰å¹³è¡¡ï¼ˆæ™ºèƒ½å„ªåŒ–ï¼‰
  stage4_constellation_balance:
    starlink_target: 150  # æ™ºèƒ½é¸æ“‡ç›®æ¨™ï¼ˆç›¸æ¯”850æ¸›å°‘82%ï¼‰
    oneweb_target: 40     # è»Œé“ç›¸ä½å„ªåŒ–ç›®æ¨™ï¼ˆç›¸æ¯”150æ¸›å°‘73%ï¼‰
    optimization_method: "orbital_phase_smart_selection"
    
  # éšæ®µ 5: æ™‚é–“è¦†è“‹å„ªåŒ–
  stage5_temporal_coverage:
    continuity_weight: 0.4
    dispersion_weight: 0.3
    quality_weight: 0.3
    
  # éšæ®µ 6: ä¿¡è™Ÿå“è³ªåŠ æ¬Š
  stage6_signal_quality:
    rsrp_weight: 0.4
    rsrq_weight: 0.3
    sinr_weight: 0.3

# ========================================
# è»Œé“é€±æœŸé…ç½®
# ========================================
orbital_periods:
  starlink:
    average_minutes: 93.63
    calculation_points: 192  # 96åˆ†é˜ / 30ç§’
    time_step_seconds: 30
    
  oneweb:
    average_minutes: 109.64
    calculation_points: 218  # 109åˆ†é˜ / 30ç§’
    time_step_seconds: 30

# ========================================
# æ€§èƒ½èˆ‡è³‡æºé™åˆ¶
# ========================================
performance:
  max_processing_time_seconds: 30
  max_memory_gb: 2
  cache_enabled: true
  cache_ttl_minutes: 60
  
  # API éŸ¿æ‡‰
  api_response_timeout_ms: 100
  
  # å‰ç«¯æ”¯æ´
  animation_fps: 60
  data_granularity_seconds: 30

# ========================================
# æ™‚ç©ºéŒ¯ç½®ç†è«–é©—è­‰çµæœ
# ========================================
validation_results:
  # å¯¦éš›é©—è­‰æ•¸æ“šï¼ˆåŸºæ–¼éšæ®µä¸‰æ•¸æ“šï¼‰
  verification_data:
    data_source: "stage3_signal_event_analysis_output.json"
    time_window_hours: 1.5  # å¯¦éš›å¯ç”¨æ•¸æ“šçª—å£
    satellites_tested: 554   # Starlink 504 + OneWeb 50
  
  # é—œéµç™¼ç¾
  key_findings:
    theoretical_minimum_satellites:
      starlink: "6-12é¡†"   # åŸºæ–¼93.63åˆ†é˜è»Œé“é€±æœŸçš„ç†è«–è¨ˆç®—
      oneweb: "8-12é¡†"     # åŸºæ–¼109.64åˆ†é˜è»Œé“é€±æœŸçš„ç†è«–è¨ˆç®—
    
    verified_practical_minimum:
      starlink: "50-100é¡†"  # è€ƒæ…®è»Œé“è¤‡é›œæ€§çš„å¯¦éš›éœ€æ±‚
      oneweb: "20-40é¡†"     # åŒ…å«å®‰å…¨ä¿‚æ•¸å’Œè»Œé“ä¸ç¢ºå®šæ€§
    
    efficiency_improvement:
      satellite_reduction: "85%"  # ç›¸æ¯”åŸ850/150çš„æ•ˆç‡æå‡
      strategy_shift: "å¾æš´åŠ›æ•¸é‡å †ç–Šåˆ°æ™ºèƒ½è»Œé“ç›¸ä½é¸æ“‡"
      
  # é©—è­‰é™åˆ¶èˆ‡å»ºè­°
  limitations_and_recommendations:
    time_window_insufficient_for_oneweb: true  # 1.5h < 1.83h OneWebé€±æœŸ
    recommended_validation_window: "2å°æ™‚"     # å®Œæ•´è¦†è“‹å…©å€‹æ˜Ÿåº§è»Œé“é€±æœŸ
    need_full_orbital_period_data: true
    strategy_focus: "è»Œé“ç›¸ä½æ™ºèƒ½é¸æ“‡ > è¡›æ˜Ÿæ•¸é‡æš´åŠ›å †ç–Š"

# ========================================
# é©—è­‰æŒ‡æ¨™
# ========================================
validation_metrics:
  # å¿…é ˆé”æˆ
  min_coverage_rate: 0.95
  max_coverage_gap_minutes: 2
  min_candidates_per_handover: 3
  
  # æ€§èƒ½æŒ‡æ¨™
  max_prefilter_time_ms: 500
  max_total_processing_seconds: 30
  
  # æ•¸æ“šå®Œæ•´æ€§
  required_timeseries_completeness: 1.0
  
# ========================================
# è¼¸å‡ºé…ç½®
# ========================================
output:
  format: "json"
  include_metadata: true
  include_selection_rationale: true
  include_timeseries: true
  
  # æª”æ¡ˆè·¯å¾‘
  stage2_output: "/netstack/data/stage2_enhanced_filtered.json"
  stage6_output: "/netstack/data/stage6_dynamic_pool.json"
  
  # æ—¥èªŒ
  log_level: "INFO"
  log_detailed_metrics: true

# ========================================
# ç·Šæ€¥å›é€€é…ç½®
# ========================================
fallback:
  # å¦‚æœå¢å¼·ç‰ˆå¤±æ•—ï¼Œå›é€€åˆ°åŸç‰ˆ
  use_original_stage2: false
  
  # å¦‚æœè¦†è“‹ä¸è¶³ï¼Œæ”¾å¯¬è¦æ±‚
  relaxed_coverage_rate: 0.90
  relaxed_subset_increase: 1.2  # å¢åŠ  20% è¡›æ˜Ÿ

# ========================================
# å¯¦é©—åŠŸèƒ½ï¼ˆå¯é¸ï¼‰
# ========================================
experimental:
  # æ©Ÿå™¨å­¸ç¿’å„ªåŒ–
  ml_optimization_enabled: false
  
  # é æ¸¬æ€§èª¿æ•´
  predictive_adjustment: false
  
  # å¤šç›®æ¨™å„ªåŒ–
  multi_objective_optimization: false